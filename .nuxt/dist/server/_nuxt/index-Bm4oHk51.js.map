{"version":3,"file":"index-Bm4oHk51.js","sources":["../../../../pages/payment/index.vue"],"sourcesContent":["\r\n<template>\r\n      <HeaderHome />\r\n    <section class=\"banner_inner\" id=\"home\">\r\n        <div class=\"banner_inner_overlay\"></div>\r\n    </section>\r\n  <div class=\"fs-5 border-bottom py-4\">\r\n    <div class=\"container d-flex flex-row\">\r\n      <div style=\"color: #377df4\" class=\"me-2\">1.Nhập thông tin ></div>\r\n      <div style=\"color: #377df4\" class=\"me-2\">2.Đặt cọc</div>\r\n    </div>\r\n  </div>\r\n  <br/>\r\n  <section class=\"packages\">\r\n    <div class=\"payment-form\">\r\n      <form @submit.prevent=\"submitPayment\">\r\n        <div class=\"form-group\">\r\n          <label for=\"orderType\">Loại thanh toán</label>\r\n          <select v-model=\"orderType\" id=\"orderType\" class=\"form-control\" disabled>\r\n            <option value=\"payment\">Đặt cọc</option>\r\n            <option value=\"other\">Khác</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"bookingId\">Mã booking</label>\r\n          <input v-model=\"bookingId\" id=\"bookingId\" class=\"form-control\" type=\"text\" readonly />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"description\">Nội dung thanh toán</label>\r\n          <textarea v-model=\"description\" id=\"description\" class=\"form-control\" readonly></textarea>\r\n          <!-- Đặt thuộc tính readonly để không cho phép người dùng thay đổi -->\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"amount\">Số tiền</label>\r\n          <input v-model=\"amount\" id=\"amount\" class=\"form-control\" type=\"number\" readonly />\r\n          <!-- Đặt thuộc tính readonly để không cho phép người dùng thay đổi -->\r\n          <p style=\"color: #dc3545; font-weight: normal;\">Số tiền đặt cọc mặc định là 100,000 VND. </p>\r\n          <p style=\"color: #dc3545; font-weight: normal;\">Lưu ý : Không hoàn lại tiền đặt cọc</p>\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-primary\">Thanh toán</button>\r\n      </form>\r\n      <br/>\r\n    </div>\r\n  </section>\r\n  <Footer />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport Api from '../../service/Base/api';\r\n\r\nconst orderType = ref('payment');\r\nconst bookingId = ref(''); // Khởi tạo bookingId\r\nconst amount = ref(100000); // Khởi tạo số tiền\r\nconst description = ref(''); // Khởi tạo description\r\n\r\nconst api = new Api();\r\nconst route = useRoute();\r\n\r\nonMounted(() => {\r\n  const id = route.query.bookingId || ''; // Lấy giá trị BookingId từ query\r\n  bookingId.value = id; // Gán BookingId\r\n  description.value = `Thanh toán đặt cọc cho mã booking: ${id}`; // Gán mô tả với BookingId\r\n});\r\n\r\nconst submitPayment = async () => {\r\n  try {\r\n    const paymentData = {\r\n      OrderType: orderType.value, // Gửi loại thanh toán\r\n      BookingId: bookingId.value, // Gửi BookingId cố định\r\n      Amount: amount.value, // Gửi số tiền\r\n      OrderDescription: description.value, // Gửi mô tả\r\n    };\r\n    const response = await api.postAPI('/payment/create', paymentData);\r\n    if (response && response.data) {\r\n      window.location.href = response.data.paymentUrl; // Điều hướng đến URL thanh toán trả về từ API\r\n    }\r\n  } catch (error) {\r\n    console.error('Lỗi thanh toán:', error);\r\n  }\r\n}\r\n\r\ndefinePageMeta({\r\n    layout: false,\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n@import '../../assets/css/bootstrap.css';\r\n@import '../../assets/css/style.css';\r\n@import '../../assets/css/font-awesome.min.css';\r\n@import '../../assets/css/css_slider.css';\r\n@import '../../assets/vendor/mdi-font/css/material-design-iconic-font.min.css';\r\n@import '../../assets/vendor/font-awesome-4.7/css/font-awesome.min.css';\r\n@import '../../assets/vendor/select2/select2.min.css';\r\n.payment-form {\r\n  max-width: 500px;\r\n  margin: auto;\r\n}\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDM,UAAA,YAAY,IAAI,SAAS;AACzB,UAAA,YAAY,IAAI,EAAE;AAClB,UAAA,SAAS,IAAI,GAAM;AACnB,UAAA,cAAc,IAAI,EAAE;AAGZ,aAAS;;;;;;;;;;;;;;;;;;;"}