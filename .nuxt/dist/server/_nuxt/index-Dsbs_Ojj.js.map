{"version":3,"file":"index-Dsbs_Ojj.js","sources":["../../../../components/form/TheFormCreateUpdateCustomer.vue","../../../../components/form/DeleteCustomerModal.vue","../../../../pages/customer/index.vue"],"sourcesContent":["<template>\r\n    <CVModal id_model=\"create-update-Customer-modal\" @close-modal=\"resetForm\" >\r\n            <template #icon>\r\n                <slot name=\"icon\"></slot>\r\n            </template>\r\n            <template #title>\r\n                <span v-if=\"isEditMode\">\r\n                    <slot name=\"header\">Cập nhật khách hàng</slot>\r\n                </span>\r\n            </template>\r\n            <template #body>\r\n                <Form ref=\"formcus\"  @submit=\"handleSubmit\"  >\r\n                    <div class=\"row\">\r\n                        <div class=\"row col-lg-6 mb-3 form-group required\">\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    Tên khách hàng\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <Field\r\n                                        name=\"nameCustomer\"\r\n                                        v-model=\"Customer.nameCustomer\"\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        :rules=\"{required:true,onlyCharacters :true}\"\r\n                                        />\r\n                                    <ErrorMessage name=\"nameCustomer\" class=\"text-danger\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    Số điện thoại\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <Field\r\n                                        name=\"phoneNumber\"\r\n                                        v-model=\"Customer.phoneNumber\"\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        :rules=\"{required : true, phone:true}\"\r\n                                        />\r\n                                    <ErrorMessage name=\"phoneNumber\" class=\"text-danger\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    Địa chỉ\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <Field\r\n                                        name=\"address\"\r\n                                        v-model=\"Customer.address\"\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        :rules=\"{required : true}\"\r\n                                        />\r\n                                    <ErrorMessage name=\"address\" class=\"text-danger\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    Giới tính\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <select v-model=\"Customer.gender\" class=\"form-control\">\r\n                                        <option v-for=\"gender in Gender\" :key=\"gender\" :value=\"gender\">\r\n                                            {{ gender ? 'Nam' : 'Nữ' }}\r\n                                        </option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row col-lg-6 mb-3 form-group required\">\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    CCCD\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <Field\r\n                                        name=\"identityCard\"\r\n                                        v-model=\"Customer.identityCard\"\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        :rules=\"{required : true}\"\r\n                                    />\r\n                                    <ErrorMessage name=\"identityCard\" class=\"text-danger\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    Email\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <Field\r\n                                        name=\"email\"\r\n                                        v-model=\"Customer.email\"\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        :rules=\"{required:true,email: true}\"\r\n                                    />\r\n                                    <ErrorMessage name=\"email\" class=\"text-danger\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    Số tài khoản\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <Field\r\n                                        name=\"accountBank\"\r\n                                        v-model=\"Customer.accountBank\"\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        :rules=\"{required : true}\"\r\n                                    />\r\n                                    <ErrorMessage name=\"accountBank\" class=\"text-danger\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mb-3 form-group required\">\r\n                                <label\r\n                                    for=\"source-name\"\r\n                                    class=\"col-sm-4 col-form-label control-label text-end\"\r\n                                >\r\n                                    Ngân hàng\r\n                                </label>\r\n                                <div class=\"col-sm-8\">\r\n                                    <Field\r\n                                        name=\"bankName\"\r\n                                        v-model=\"Customer.bankName\"\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        :rules=\"{required : true}\"\r\n                                    />\r\n                                    <ErrorMessage name=\"bankName\" class=\"text-danger\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- <TipTap v-model=\"Customer.nameCustomer\"></TipTap> -->\r\n                    </div>\r\n\r\n                    <div class=\"modal-footer align-content-center justify-content-center\">\r\n                        <button\r\n                            v-if=\"isEditMode\"\r\n                            type=\"submit\"\r\n                            class=\"btn btn-sm btn-primary d-flex align-items-center\"\r\n                            \r\n                        >\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"0.88em\"\r\n                                height=\"1em\"\r\n                                viewBox=\"0 -70 700 700\"\r\n                            >\r\n                                <path\r\n                                    fill=\"#f7f7f7\"\r\n                                    d=\"m433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941M224 416c-35.346 0-64-28.654-64-64c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64m96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48\"\r\n                                />\r\n                            </svg>\r\n                            Lưu\r\n                        </button>\r\n                        <button \r\n                            id=\"closeModalButton\" \r\n                            type=\"button\" \r\n                            class=\"btn-close\" \r\n                            data-bs-dismiss=\"modal\" \r\n                            hidden>\r\n                        </button>\r\n                    </div>\r\n                </Form>\r\n            </template>\r\n    </CVModal>\r\n</template>\r\n<script setup>\r\nimport { ref, watch } from 'vue';\r\nimport Api from '~/service/Base/api.ts';\r\nimport {Form, Field,ErrorMessage } from 'vee-validate';\r\nimport { useToast } from 'vue-toast-notification';\r\n\r\nconst toast = useToast();\r\nconst api = new Api();\r\nconst emits = defineEmits(['Customer-saved']);\r\nconst formcus = ref(null);\r\n\r\n/** received data */\r\nconst props = defineProps({\r\n    editCustomer: {\r\n        type: Object,\r\n        default: null,\r\n        required: false,\r\n    },\r\n    isEditMode: {\r\n        type: Boolean,\r\n        default: false,\r\n        required: true,\r\n    },\r\n});\r\nconst Gender = [true, false];  // Thay đổi thành các giá trị boolean\r\n\r\nconst resetForm = () => {\r\n    // Reset giá trị Customer\r\n    Customer.value = { ...defaultCustomer };\r\n\r\n    // Đảm bảo form được reset hoàn toàn\r\n    if (formcus.value) {\r\n        formcus.value.resetForm({\r\n            values: { ...Customer.value },\r\n            errors: {},\r\n        });\r\n    }\r\n};\r\n\r\nconst defaultCustomer = {\r\n    nameCustomer: '',\r\n    phoneNumber: '',\r\n    identityCard: '',\r\n    address: '',\r\n    email: '',\r\n    accountBank: '',\r\n    gender: true,\r\n    bankName: '',\r\n};\r\n\r\nconst Customer = ref({ ...defaultCustomer });\r\n\r\n// const errorMessage = ref('');\r\n// const Customer = ref({\r\n//     nameCustomer: '',\r\n//     phoneNumber: '',\r\n//     identityCard: '',\r\n//     address: '',\r\n//     email: '',\r\n//     accountBank: '',\r\n//     gender: true,\r\n//     bankName: '',\r\n// });\r\n/** update Customer */\r\nconst updateCustomer = () => {\r\n    const data = {\r\n        nameCustomer: Customer.value.nameCustomer,\r\n        phoneNumber: Customer.value.phoneNumber,\r\n        address: Customer.value.address,\r\n        email: Customer.value.email,\r\n        identityCard: Customer.value.identityCard,\r\n        accountBank: Customer.value.accountBank,\r\n        gender: JSON.parse( Customer.value.gender),\r\n        bankName: Customer.value.bankName,\r\n        id: props.editCustomer.id,\r\n    };\r\n    api.putAPI(`/Customer/${props.editCustomer.id}`, data)\r\n        .then((res) => {\r\n            emits('Customer-saved');\r\n            toast.success('Cập nhật thành công');\r\n            document.getElementById('closeModalButton').click();\r\n        })\r\n        .catch((error) => {\r\n            console.error('Error updating Customer:', error);\r\n        });\r\n    resetForm();\r\n};\r\n\r\n/**\r\n * handle submit\r\n */\r\nconst handleSubmit = () => {\r\n    if (props.isEditMode) {\r\n        updateCustomer();\r\n    } else {\r\n        createCustomer();\r\n    }\r\n};\r\n\r\n/**\r\n * update data of edit Customer\r\n */\r\nwatch(\r\n    () => props.editCustomer,\r\n    (newVal) => {\r\n        if (newVal) {\r\n            Customer.value = { ...newVal };\r\n            if (formcus.value) {\r\n                formcus.value.resetForm({\r\n                    values: { ...Customer.value }, // Gán giá trị từ editCustomer\r\n                    errors: {}, // Đảm bảo không có lỗi nào\r\n                });\r\n            }\r\n        }\r\n    },\r\n    { immediate: true },\r\n);\r\n</script>\r\n","<template>\r\n    <CVModal id_model=\"deleteCustomerModal\">\r\n        <template #icon>\r\n            <slot name=\"icon\"></slot>\r\n        </template>\r\n        <template #title>\r\n            <slot name=\"header\">Xóa khách hàng này</slot>\r\n        </template>\r\n        <template #body>\r\n            <p>Bạn có chắc chắn muốn xóa khách hàng này?</p>\r\n            <div class=\"modal-footer align-content-center justify-content-center\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\r\n                    Hủy bỏ\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteCustomer\">\r\n                    Xóa\r\n                </button>\r\n            </div>\r\n        </template>\r\n    </CVModal>\r\n</template>\r\n<script setup>\r\nimport Api from '~/service/Base/api.ts';\r\nimport { useToast } from 'vue-toast-notification';\r\nconst toast = useToast();\r\nconst props = defineProps({\r\n    CustomerId: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n});\r\n\r\nconst api = new Api();\r\nconst emits = defineEmits(['Customer-deleted', 'hide-modal']);\r\nconst deleteCustomer = () => {\r\n    const id = props.CustomerId;\r\n    api.deleteById('/Customer', id)\r\n        .then((res) => {\r\n            emits('Customer-deleted', id);\r\n            emits('hide-modal');\r\n            $('.btn-close').click();\r\n            toast.success('Xóa thành công')\r\n        })\r\n        .catch((error) => {\r\n            console.error('Lỗi khi xóa khách hàng:', error);\r\n        });\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","<template>\r\n    <div class=\"row\">\r\n        <div class=\"p-4\">\r\n            <div class=\"search\">\r\n                <h4 class=\"search-text h5\">Khách hàng</h4>\r\n                <form name=\"search\" @submit.prevent=\"search\">\r\n                    <div class=\"mt-3\">Tìm kiếm:</div>\r\n                    <div class=\"search-text d-flex align-content-center\">\r\n                        <div class=\"col-md-3\">\r\n                            <input\r\n                                class=\"form-control col-md-2\"\r\n                                v-model=\"searchString\"\r\n                                type=\"text\"\r\n                                placeholder=\" Số điện thoại... \"\r\n                            />\r\n                        </div>\r\n                        <span class=\"button d-flex\">\r\n                            <button\r\n                                class=\"ms-2 btn-sm me-1 btn btn-primary\"\r\n                                type=\"submit\"\r\n                            >\r\n                                <svg\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    width=\"1.5em\"\r\n                                    height=\"1.5em\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                >\r\n                                    <path\r\n                                        fill=\"currentColor\"\r\n                                        d=\"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14\"\r\n                                    />\r\n                                </svg>\r\n                                Tìm kiếm\r\n                            </button>\r\n                            <!-- <button\r\n                                class=\"btn btn-sm btn-outline-primary\"\r\n                                type=\"reset\"\r\n                                @click=\"resetSearchForm()\"\r\n                            >\r\n                                <svg\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    width=\"1.5em\"\r\n                                    height=\"1.5em\"\r\n                                    viewBox=\"0 0 256 256\"\r\n                                >\r\n                                    <path\r\n                                        fill=\"currentColor\"\r\n                                        d=\"M225 80.4L183.6 39a24 24 0 0 0-33.94 0L31 157.66a24 24 0 0 0 0 33.94l30.06 30.06a8 8 0 0 0 5.68 2.34H216a8 8 0 0 0 0-16h-84.7l93.7-93.66a24 24 0 0 0 0-33.94M213.67 103L160 156.69L107.31 104L161 50.34a8 8 0 0 1 11.32 0l41.38 41.38a8 8 0 0 1 0 11.31Z\"\r\n                                    />\r\n                                </svg>\r\n                                Xóa Form\r\n                            </button> -->\r\n                        </span>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class=\"data\">\r\n                <div class=\"btn-handle d-flex justify-content-end mb-3\">\r\n                    <TheFormCreateUpdateCustomer\r\n                        :isEditMode=\"isEditMode\"\r\n                        :editCustomer=\"editCustomerData\"\r\n                        @Customer-saved=\"getCustomers\"\r\n                    />\r\n                    \r\n\r\n                    <!-- <div class=\"reload\">\r\n                        <a class=\"text-info\" href=\"#\" @click=\"getCustomers()\">\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"20\"\r\n                                height=\"20\"\r\n                                viewBox=\"0 0 512 512\"\r\n                            >\r\n                                <path\r\n                                    fill=\"currentColor\"\r\n                                    d=\"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208s208-93.31 208-208S370.69 48 256 48m120 190.77h-89l36.88-36.88l-5.6-6.51a87.38 87.38 0 1 0-62.94 148a87.55 87.55 0 0 0 82.42-58.25l5.37-15.13l30.17 10.67l-5.3 15.13a119.4 119.4 0 1 1-112.62-159.18a118.34 118.34 0 0 1 86.36 36.95l.56.62l4.31 5L376 149.81Z\"\r\n                                />\r\n                            </svg>\r\n                        </a>\r\n                    </div> -->\r\n                </div>\r\n                <table\r\n                    class=\"table text-center table-hover table-success table-striped-columns\"\r\n                >\r\n                    <thead class=\"table-primary table-active\">\r\n                        <tr>\r\n                            <th scope=\"col\">No.</th>\r\n                            <th colspan=\"2\">Thông tin khách hàng</th>\r\n                            <th colspan=\"2\">Thông tin liên lạc</th>\r\n                            <th scope=\"col\">Địa chỉ</th>\r\n                            <th colspan=\"2\">Thông tin thanh toán</th>\r\n                            <th scope=\"col\">Tác vụ</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"(Customer, index) in Customers\" :key=\"index\">\r\n                            <td class=\"p-4 booking-id-col\">{{ ++index }}</td>\r\n                            <td colspan=\"2\" class=\"p-4\">\r\n                                {{ Customer.nameCustomer }} -\r\n                                <span v-if=\"Customer.gender == true\">Nam</span>\r\n                                <span v-else=\"Customer.gender == false\">Nữ</span>\r\n                                <br />\r\n                                <span>CCCD : {{ Customer.identityCard }}</span>\r\n                            </td>\r\n                            <td colspan=\"2\" class=\"p-4\">\r\n                                <a\r\n                                    class=\"phone-link\"\r\n                                    :href=\"`tel://${Customer.phoneNumber}`\"\r\n                                    >{{ Customer.phoneNumber }}\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"16\"\r\n                                        height=\"16\"\r\n                                        fill=\"currentColor\"\r\n                                        class=\"bi bi-telephone-forward-fill ms-2\"\r\n                                        viewBox=\"0 0 16 16\"\r\n                                    >\r\n                                        <path\r\n                                            fill-rule=\"evenodd\"\r\n                                            d=\"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877zm10.761.135a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708L14.293 4H9.5a.5.5 0 0 1 0-1h4.793l-1.647-1.646a.5.5 0 0 1 0-.708\"\r\n                                        /></svg></a>\r\n                                <br />\r\n                                <span> {{ Customer.email }}</span>\r\n                            </td>\r\n\r\n                            <td class=\"p-4\">\r\n                                {{ Customer.address }}\r\n                            </td>\r\n                            <td colspan=\"2\" class=\"p-4\">\r\n                                {{ Customer.accountBank }} \r\n                                <br />\r\n                                {{ Customer.bankName }}\r\n                            </td>\r\n\r\n                            <td class=\"p-4\">\r\n                                <div\r\n                                    class=\"d-flex justify-content-center align-content-center align-items-center\"\r\n                                >\r\n                                    <NuxtLink\r\n                                        class=\"link link-primary text-decoration-none mx-1\"\r\n                                        data-bs-toggle=\"modal\"\r\n                                        data-bs-target=\"#create-update-Customer-modal\"\r\n                                        @click=\"CustomerEdit(Customer)\"\r\n                                        style=\"cursor: pointer\"\r\n                                    >\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"1em\"\r\n                                            height=\"1em\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                        >\r\n                                            <path\r\n                                                fill=\"currentColor\"\r\n                                                d=\"M5 18.08V19h.92l9.06-9.06l-.92-.92z\"\r\n                                                opacity=\"0.3\"\r\n                                            />\r\n                                            <path\r\n                                                fill=\"currentColor\"\r\n                                                d=\"M20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83l3.75 3.75zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM5.92 19H5v-.92l9.06-9.06l.92.92z\"\r\n                                            />\r\n                                        </svg>\r\n                                    </NuxtLink>\r\n                                    <NuxtLink\r\n                                        class=\"link link-danger text-decoration-none mx-1\"\r\n                                        style=\"cursor: pointer\"\r\n                                        @click=\"deleteCustomer(Customer.id)\"\r\n                                        data-bs-toggle=\"modal\"\r\n                                        data-bs-target=\"#deleteCustomerModal\"\r\n                                    >\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"1em\"\r\n                                            height=\"1em\"\r\n                                            viewBox=\"0 0 48 48\"\r\n                                        >\r\n                                            <path\r\n                                                fill=\"currentColor\"\r\n                                                d=\"M20 10.5v.5h8v-.5a4 4 0 0 0-8 0m-2.5.5v-.5a6.5 6.5 0 1 1 13 0v.5h11.25a1.25 1.25 0 1 1 0 2.5h-2.917l-2 23.856A7.25 7.25 0 0 1 29.608 44H18.392a7.25 7.25 0 0 1-7.224-6.644l-2-23.856H6.25a1.25 1.25 0 1 1 0-2.5zm4 9.25a1.25 1.25 0 1 0-2.5 0v14.5a1.25 1.25 0 1 0 2.5 0zM27.75 19c-.69 0-1.25.56-1.25 1.25v14.5a1.25 1.25 0 1 0 2.5 0v-14.5c0-.69-.56-1.25-1.25-1.25\"\r\n                                            />\r\n                                        </svg>\r\n                                    </NuxtLink>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <DeleteCustomerModal\r\n                    :CustomerId=\"selectedCustomerId\"\r\n                    @Customer-deleted=\"getCustomers\"\r\n                    @hide-modal=\"getCustomers\"\r\n                />\r\n                <!-- <div class=\"d-flex justify-content-between\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <span class=\"me-5\">Tổng số: {{ totalCount }} Khách hàng</span>\r\n                        <span>\r\n                            <Pagination\r\n                                :current-page=\"pageNumber\"\r\n                                :total-pages=\"totalPage\"\r\n                                :next-page=\"nextPage\"\r\n                                :previous-page=\"previousPage\"\r\n                                :set-page=\"setPage\"\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                    <div></div>\r\n                </div> -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted} from 'vue';\r\nimport DeleteCustomerModal from '~/components/form/DeleteCustomerModal.vue';\r\nimport Api from '~/service/Base/api.ts';\r\nconst api = new Api();\r\nconst Customers = ref([]);\r\nconst selectedCustomerId = ref(null);\r\nconst editCustomerData = ref({});\r\nconst isEditMode = ref(false);\r\nconst searchString = ref('');\r\nconst pageNumber = ref(1);\r\nconst totalPage = ref(0);\r\nconst totalCount = ref(0);\r\nconst pageSize = ref(10);\r\n/**\r\n * auth\r\n */\r\n definePageMeta({\r\n    middleware: ['auth','admin'],\r\n});\r\n\r\n/**\r\n * get all Customers\r\n */\r\n// const getCustomers = async () => {\r\n//     try {\r\n//         var response = await api.get(\r\n//             `/Customer/GetAllPagination?PageSize=${pageSize.value}&PageNumber=${pageNumber.value}`,\r\n//         );\r\n//         Customers.value = response.data.responseData.data;\r\n//         totalCount.value = response.data.responseData.pagination.totalCount;\r\n//         totalPage.value = response.data.responseData.pagination.totalPage;\r\n//     } catch (err) {\r\n//         console.log(err);\r\n//     }\r\n// };\r\nconst getCustomers = async () => {\r\n    try {\r\n        var response = await api.get(\r\n            `/Customer`,null,\r\n        );\r\n        Customers.value = response.data.responseData;\r\n        \r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\n/**\r\n * delete Customer\r\n * @param {*} id\r\n */\r\nconst deleteCustomer = async (id) => {\r\n    try {\r\n        selectedCustomerId.value = id;\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\n/**\r\n * edit Customer\r\n * @param {*} Customer\r\n */\r\nconst CustomerEdit = async (Customer) => {\r\n    try {\r\n        editCustomerData.value = {\r\n            nameCustomer: Customer.nameCustomer,\r\n            phoneNumber: Customer.phoneNumber,\r\n            identityCard: Customer.identityCard,\r\n            address: Customer.address,\r\n            email: Customer.email,\r\n            accountBank: Customer.accountBank,\r\n            gender: Customer.gender,\r\n            bankName: Customer.bankName,\r\n            id: Customer.id,\r\n        };\r\n        isEditMode.value = true;\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\n/**\r\n * reset form search\r\n */\r\nconst resetSearchForm = async () => {\r\n    try {\r\n        searchString.value = '';\r\n        getCustomers();\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\n/**\r\n * search\r\n */\r\nconst search = async () => {\r\n    try {\r\n        if (!searchString.value) {\r\n            await getCustomers();\r\n            return;\r\n        } else {\r\n            const res = await api.get(`/Customer/searchByPhone?phone=${searchString.value}`, null);\r\n            Customers.value = res.data.responseData;\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\n/**\r\n * call\r\n */\r\nonMounted (async () => {\r\n    await getCustomers();\r\n})\r\n/**\r\n * Pagination\r\n */\r\nconst nextPage = () => {\r\n    pageNumber.value++;\r\n    getCustomers();\r\n};\r\nconst previousPage = () => {\r\n    pageNumber.value--;\r\n    getCustomers();\r\n};\r\nconst setPage = (number) => {\r\n    pageNumber.value = number;\r\n    getCustomers();\r\n};\r\n\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA,UAAM,QAAQ;AACR,UAAA,MAAM,IAAI;AAChB,UAAM,QAAQ;AACR,UAAA,UAAU,IAAI,IAAI;AAGxB,UAAM,QAAQ;AAYR,UAAA,SAAS,CAAC,MAAM,KAAK;AAE3B,UAAM,YAAY,MAAM;AAEX,eAAA,QAAQ,EAAE,GAAG;AAGtB,UAAI,QAAQ,OAAO;AACf,gBAAQ,MAAM,UAAU;AAAA,UACpB,QAAQ,EAAE,GAAG,SAAS,MAAM;AAAA,UAC5B,QAAQ,CAAC;AAAA,QAAA,CACZ;AAAA,MACL;AAAA,IAAA;AAGJ,UAAM,kBAAkB;AAAA,MACpB,cAAc;AAAA,MACd,aAAa;AAAA,MACb,cAAc;AAAA,MACd,SAAS;AAAA,MACT,OAAO;AAAA,MACP,aAAa;AAAA,MACb,QAAQ;AAAA,MACR,UAAU;AAAA,IAAA;AAGd,UAAM,WAAW,IAAI,EAAE,GAAG,gBAAiB,CAAA;AAc3C,UAAM,iBAAiB,MAAM;AACzB,YAAM,OAAO;AAAA,QACT,cAAc,SAAS,MAAM;AAAA,QAC7B,aAAa,SAAS,MAAM;AAAA,QAC5B,SAAS,SAAS,MAAM;AAAA,QACxB,OAAO,SAAS,MAAM;AAAA,QACtB,cAAc,SAAS,MAAM;AAAA,QAC7B,aAAa,SAAS,MAAM;AAAA,QAC5B,QAAQ,KAAK,MAAO,SAAS,MAAM,MAAM;AAAA,QACzC,UAAU,SAAS,MAAM;AAAA,QACzB,IAAI,MAAM,aAAa;AAAA,MAAA;AAEvB,UAAA,OAAO,aAAa,MAAM,aAAa,EAAE,IAAI,IAAI,EAChD,KAAK,CAAC,QAAQ;AACX,cAAM,gBAAgB;AACtB,cAAM,QAAQ,qBAAqB;AAC1B,QAAA,SAAA,eAAe,kBAAkB,EAAE,MAAM;AAAA,MAAA,CACrD,EACA,MAAM,CAAC,UAAU;AACN,gBAAA,MAAM,4BAA4B,KAAK;AAAA,MAAA,CAClD;AACK;IAAA;AAMd,UAAM,eAAe,MAAM;AACvB,UAAI,MAAM,YAAY;AACH;MAAA,OACZ;AACY;MACnB;AAAA,IAAA;AAMJ;AAAA,MACI,MAAM,MAAM;AAAA,MACZ,CAAC,WAAW;AACR,YAAI,QAAQ;AACC,mBAAA,QAAQ,EAAE,GAAG;AACtB,cAAI,QAAQ,OAAO;AACf,oBAAQ,MAAM,UAAU;AAAA,cACpB,QAAQ,EAAE,GAAG,SAAS,MAAM;AAAA;AAAA,cAC5B,QAAQ,CAAC;AAAA;AAAA,YAAA,CACZ;AAAA,UACL;AAAA,QACJ;AAAA,MACJ;AAAA,MACA,EAAE,WAAW,KAAK;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5RtB,UAAM,QAAQ,SAAQ;AACtB,UAAM,QAAQ;AAOd,UAAM,MAAM,IAAI;AAChB,UAAM,QAAQ;AACd,UAAM,iBAAiB,MAAM;AACzB,YAAM,KAAK,MAAM;AACjB,UAAI,WAAW,aAAa,EAAE,EACzB,KAAK,CAAC,QAAQ;AACX,cAAM,oBAAoB,EAAE;AAC5B,cAAM,YAAY;AAClB,UAAE,YAAY,EAAE;AAChB,cAAM,QAAQ,gBAAgB;AAAA,MAC1C,CAAS,EACA,MAAM,CAAC,UAAU;AACd,gBAAQ,MAAM,2BAA2B,KAAK;AAAA,MAC1D,CAAS;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwKA,UAAM,MAAM,IAAI;AAChB,UAAM,YAAY,IAAI,CAAA,CAAE;AACxB,UAAM,qBAAqB,IAAI,IAAI;AACnC,UAAM,mBAAmB,IAAI,CAAA,CAAE;AAC/B,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,eAAe,IAAI,EAAE;AACR,QAAI,CAAC;AACN,QAAI,CAAC;AACJ,QAAI,CAAC;AACP,QAAI,EAAE;AAuBvB,UAAM,eAAe,YAAY;AAC7B,UAAI;AACA,YAAI,WAAW,MAAM,IAAI;AAAA,UACrB;AAAA,UAAY;AAAA,QACxB;AACQ,kBAAU,QAAQ,SAAS,KAAK;AAAA,MAEnC,SAAQ,KAAK;AACV,gBAAQ,IAAI,GAAG;AAAA,MAClB;AAAA,IACL;AAMA,UAAM,iBAAiB,OAAO,OAAO;AACjC,UAAI;AACA,2BAAmB,QAAQ;AAAA,MAC9B,SAAQ,KAAK;AACV,gBAAQ,IAAI,GAAG;AAAA,MAClB;AAAA,IACL;AAMA,UAAM,eAAe,OAAO,aAAa;AACrC,UAAI;AACA,yBAAiB,QAAQ;AAAA,UACrB,cAAc,SAAS;AAAA,UACvB,aAAa,SAAS;AAAA,UACtB,cAAc,SAAS;AAAA,UACvB,SAAS,SAAS;AAAA,UAClB,OAAO,SAAS;AAAA,UAChB,aAAa,SAAS;AAAA,UACtB,QAAQ,SAAS;AAAA,UACjB,UAAU,SAAS;AAAA,UACnB,IAAI,SAAS;AAAA,QACzB;AACQ,mBAAW,QAAQ;AAAA,MACtB,SAAQ,KAAK;AACV,gBAAQ,IAAI,GAAG;AAAA,MAClB;AAAA,IACL;AAkCA,cAAW,YAAY;AACnB,YAAM,aAAY;AAAA,IACtB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}