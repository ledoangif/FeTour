{"version":3,"file":"index-Bd0GqjGn.js","sources":["../../../../components/form/TheFormCreateUpdateTour.vue","../../../../components/form/DeleteTourModal.vue","../../../../pages/tour/index.vue"],"sourcesContent":["<template>\r\n    \r\n        <CVModal id_model=\"create-update-Tour-modal\" @close-modal=\"resetForm\">\r\n            <template #icon>\r\n                <slot name=\"icon\"></slot>\r\n            </template>\r\n            <template #title>\r\n                <span v-if=\"!isEditMode\">\r\n                    <slot name=\"header\">Thêm Tour du lịch </slot>\r\n                </span>\r\n                <span v-else>\r\n                    <slot name=\"header\">Cập nhật Tour du lịch</slot>\r\n                </span>\r\n            </template>\r\n            <template #body>\r\n                <Form ref=\"form\" @submit=\"handleSubmit\" :key=\"keyformtour\">\r\n                    <div class=\"row\">\r\n                    <div class=\"row col-lg-6 mb-3 form-group required\">\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Ảnh\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field name=\"image\" v-model=\"Tour.image\" type=\"file\" class=\"form-control\"\r\n                                    :rules=\"{ required: true }\" @change=\"handlefiles\" />\r\n                                <ErrorMessage name=\"image\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Số lượng vé\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field id=\"seat\" name=\"seat\" v-model=\"Tour.seat\" class=\"form-control\"\r\n                                    :rules=\"{ required: true,naturalNumber: true }\" />\r\n                                <ErrorMessage name=\"seat\" class=\"text-danger\" />\r\n                                <br />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Giá mua\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field id=\"priceBuy\" name=\"priceBuy\" v-model=\"computedValue1\" class=\"form-control\"\r\n                                    :rules=\"{ required: true,cost:true}\" />\r\n                                <ErrorMessage name=\"priceBuy\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Giá bán gốc\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field id=\"cost\" name=\"cost\" v-model=\"computedValue\" class=\"form-control\"\r\n                                    :rules=\"{ required: true ,cost:true}\" />\r\n                                <ErrorMessage name=\"cost\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Giảm giá\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field name=\"discount\" v-model=\"Tour.discount\" type=\"text\" class=\"form-control\"\r\n                                    :rules=\"{ required: true, discount:true }\" />\r\n                                <ErrorMessage name=\"discount\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Nội địa?\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field as=\"select\" id=\"isLocal\" name=\"isLocal\" v-model=\"Tour.isLocal\"\r\n                                    class=\"form-control\" >\r\n                                    <option v-for=\"item in isLocal\" class=\"text-dark\" :value=\"item.value\" >\r\n                                        {{ item.value ? 'Nội địa' : 'Nước ngoài' }}\r\n                                    </option>\r\n                                    <!-- <option v-for=\"gender in Gender\" :key=\"gender\" :value=\"gender\">\r\n                                        {{ gender ? 'Nam' : 'Nữ' }}\r\n                                    </option> -->\r\n                                </Field>\r\n                                <ErrorMessage name=\"isLocal\" class=\"text-danger\"></ErrorMessage>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Quốc Gia\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field as=\"select\" id=\"country\" name=\"country\" v-model=\"Tour.countryId\"\r\n                                    class=\"form-control\" :rules=\"{ required: true}\">\r\n                                    <option v-for=\"item in filteredCountries\" class=\"text-dark\" :value=\"item.id\">\r\n                                        {{ item.countryName }}\r\n                                    </option>\r\n                                </Field>\r\n                                <ErrorMessage name=\"country\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Địa điểm\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field name=\"place\" v-model=\"Tour.place\" type=\"text\" class=\"form-control\"\r\n                                    :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"place\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Nơi khởi hành\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field name=\"placeStart\" v-model=\"Tour.placeStart\" type=\"text\" class=\"form-control\"\r\n                                    :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"placeStart\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Nơi tập trung\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field name=\"meetingPoint\" v-model=\"Tour.meetingPoint\" type=\"text\" class=\"form-control\"\r\n                                    :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"meetingPoint\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Nơi kết thúc\r\n                            </label>\r\n                            <div class=\"col-sm-8\">\r\n                                <Field name=\"placeEnd\" v-model=\"Tour.placeEnd\" type=\"text\" class=\"form-control\"\r\n                                    :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"placeEnd\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Ngày bắt đầu\r\n                            </label>\r\n                            <div class=\"col-sm-8 d-flex flex-row\">\r\n                                <span class=\"col-4\">\r\n                                    <Field name=\"timeStart\" v-model=\"Tour.timeStart\" type=\"time\"\r\n                                        class=\"input-edit me-1 form-control\" :rules=\"{ required: true }\" />\r\n                                    <ErrorMessage name=\"timeStart\" class=\"text-danger\" />\r\n                                </span>\r\n                                <span class=\"col-8 ms-2\">\r\n                                    <Field name=\"dateStart\" v-model=\"Tour.dateStart\" type=\"date\" class=\"form-control\"\r\n                                        :rules=\"{ required: true }\" />\r\n                                    <ErrorMessage name=\"dateStart\" class=\"text-danger\" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3 form-group required\">\r\n                            <label for=\"source-name\" class=\"col-sm-4 col-form-label control-label text-end\">\r\n                                Ngày kết thúc\r\n                            </label>\r\n                            <div class=\"col-sm-8 d-flex flex-row\">\r\n                                <span class=\"col-4\">\r\n                                    <Field name=\"timeEnd\" v-model=\"Tour.timeEnd\" type=\"time\"\r\n                                        class=\"input-edit me-1 form-control\" :rules=\"{ required: true }\" />\r\n                                    <ErrorMessage name=\"timeEnd\" class=\"text-danger\" />\r\n                                </span>\r\n                                <span class=\"col-8 ms-2\">\r\n                                    <Field name=\"dateEnd\" v-model=\"Tour.dateEnd\" type=\"date\" class=\"form-control\"\r\n                                        :rules=\"{ required: true ,endDateGreaterThanStart: [Tour.dateStart]}\" />\r\n                                    <ErrorMessage name=\"dateEnd\" class=\"text-danger\" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row col-lg-6\">\r\n                        <div class=\"row form-group required mb-3\">\r\n                            <label for=\"source-name\" class=\"col-sm-3 col-form-label control-label text-end\">Tên Tour\r\n                            </label>\r\n                            <div class=\"col-9\">\r\n                                <Field as=\"textarea\" name=\"nameTour\" v-model=\"Tour.nameTour\" type=\"text\"\r\n                                    class=\"form-control\" style=\"height: 50px\" :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"nameTour\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row form-group required mb-3\">\r\n                            <label for=\"source-name\" class=\"col-sm-3 col-form-label control-label text-end\">Mô tả\r\n                            </label>\r\n                            <div class=\"col-sm-9\">\r\n                                <Field as=\"textarea\" name=\"descripttion\" v-model=\"Tour.descripttion\" type=\"text\"\r\n                                    class=\"form-control\" style=\"height: 150px\" :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"descripttion\" class=\"text-danger\" />\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div class=\"row form-group required mb-3\">\r\n                            <label for=\"source-name\" class=\"col-sm-3 col-form-label control-label text-end\">Dịch vụ bao\r\n                                gồm\r\n                            </label>\r\n                            <div class=\"col-sm-9\">\r\n                                <!-- <Field as=\"textarea\" name=\"serviceInclude\" v-model=\"Tour.serviceInclude\" type=\"text\"\r\n                                    class=\"form-control\" style=\"height: 150px\" :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"serviceInclude\" class=\"text-danger\" /> -->\r\n                                <TipTap v-model=\"Tour.serviceInclude\"></TipTap>\r\n                                <p v-if=\"errorMessage1.serviceInclude\" class=\"text-danger\">\r\n                                    {{ errorMessage1.serviceInclude }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row form-group required mb-3\">\r\n                            <label for=\"source-name\" class=\"col-sm-3 col-form-label control-label text-end\">Dịch vụ\r\n                                không bao gồm\r\n                            </label>\r\n                            <div class=\"col-sm-9\">\r\n                                <!-- <Field as=\"textarea\" name=\"serviceNotInclude\" v-model=\"Tour.serviceNotInclude\" type=\"text\"\r\n                                    class=\"form-control\" style=\"height: 150px\" :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"serviceNotInclude\" class=\"text-danger\" /> -->\r\n                                <TipTap v-model=\"Tour.serviceNotInclude\"></TipTap>\r\n                                <p v-if=\"errorMessage1.serviceNotInclude\" class=\"text-danger\">\r\n                                    {{ errorMessage1.serviceNotInclude }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row form-group required mb-3\">\r\n                            <label for=\"source-name\" class=\"col-sm-3 col-form-label control-label text-end\">Lịch Trình\r\n                            </label>\r\n                            <div class=\"col-sm-9\">\r\n                                <!-- <Field as=\"textarea\" name=\"plan\" v-model=\"Tour.plan\" type=\"text\"\r\n                                    class=\"form-control\" style=\"height: 150px\" :rules=\"{ required: true }\" />\r\n                                <ErrorMessage name=\"plan\" class=\"text-danger\" /> -->\r\n                                <TipTap v-model=\"Tour.plan\"></TipTap>\r\n                                <p v-if=\"errorMessage1.plan\" class=\"text-danger\">\r\n                                    {{ errorMessage1.plan }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"modal-footer align-content-center justify-content-center\">\r\n                    <button v-if=\"isEditMode\" type=\"submit\" class=\"btn btn-sm btn-primary d-flex align-items-center\" \r\n                        >\r\n                        Lưu\r\n                    </button>\r\n                    <button v-else type=\"submit\" class=\"btn btn-sm btn-primary d-flex align-items-center\"\r\n                        >\r\n                        Thêm\r\n                    </button>\r\n                    <button \r\n                        id=\"closeModalButton\" \r\n                        type=\"button\" \r\n                        class=\"btn-close\" \r\n                        data-bs-dismiss=\"modal\" \r\n                        hidden>\r\n                    </button>\r\n                </div>\r\n                </Form>\r\n            </template>\r\n        </CVModal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue';\r\nimport Api from '~/service/Base/api.ts';\r\nimport { Form, Field } from 'vee-validate';\r\nimport { useToast } from 'vue-toast-notification';\r\nconst keyformtour = ref(0); // Giá trị dùng để ép re-render\r\nconst toast = useToast();\r\nconst api = new Api();\r\nconst Country = ref([]);\r\nconst form = ref(null);\r\nconst emits = defineEmits(['Tour-saved']);\r\nconst accountId = ref('');\r\n\r\n/** received data */\r\nconst props = defineProps({\r\n    editTour: {\r\n        type: Object,\r\n        default: null,\r\n        required: false,\r\n    },\r\n    isEditMode: {\r\n        type: Boolean,\r\n        default: false,\r\n        required: true,\r\n    },\r\n});\r\n/** reset form */\r\nconst resetForm = () => {\r\n    Tour.value.nameTour= '',\r\n    Tour.value.descripttion= '',\r\n    Tour.value.seat= '',\r\n    Tour.value.cost= '',\r\n    Tour.value.priceBuy='',\r\n    Tour.value.discount= '',\r\n    Tour.value.dateEnd= '',\r\n    Tour.value.dateStart= '',\r\n    Tour.value.placeEnd= '',\r\n    Tour.value.placeStart= '',\r\n    Tour.value.timeEnd= '',\r\n    Tour.value.timeStart= '',\r\n    Tour.value.place= '',\r\n    Tour.value.plan= '',\r\n    Tour.value.image= '',\r\n    Tour.value.serviceInclude= '',\r\n    Tour.value.serviceNotInclude= '',\r\n    Tour.value.countryId= '',\r\n    Tour.value.isLocal= '',\r\n    Tour.value.meetingPoint= '',\r\n    keyformtour.value +=1;\r\n    errorMessage.value = '';\r\n    errorMessage1.value = {};\r\n};\r\nconst errorMessage = ref('');\r\nconst Tour = ref({\r\n    nameTour: '',\r\n    descripttion: '',\r\n    seat: '',\r\n    cost: '',\r\n    priceBuy: '',\r\n    discount: '',\r\n    dateEnd: '',\r\n    dateStart: '',\r\n    placeEnd: '',\r\n    placeStart: '',\r\n    timeEnd: '',\r\n    timeStart: '',\r\n    place: '',\r\n    plan: '',\r\n    image: '',\r\n    serviceInclude: '',\r\n    serviceNotInclude: '',\r\n    countryId: '',\r\n    isLocal: '',\r\n    meetingPoint: '',\r\n});\r\nconst handlefiles = async (event) => {\r\n    const files = event.target.files;\r\n    const file = files[0];\r\n    // Kiểm tra xem có file nào được chọn không\r\n    if (!file) {\r\n        alert(\"Vui lòng chọn một file.\");\r\n        return;\r\n    }\r\n    // Kiểm tra định dạng file (chỉ cho phép jpg hoặc png)\r\n    const validExtensions = ['image/jpeg', 'image/png']; // Định dạng file hợp lệ\r\n    if (!validExtensions.includes(file.type)) {\r\n        alert(\"Chỉ chấp nhận ảnh có định dạng JPG hoặc PNG.\");\r\n        // Reset input file (Xóa file đã chọn)\r\n        event.target.value = '';\r\n        return;\r\n    }\r\n    // Kiểm tra kích thước file (không vượt quá 2MB)\r\n    const maxSize = 2 * 1024 * 1024; // 2MB\r\n    if (file.size > maxSize) {\r\n        alert(\"Kích thước file không được vượt quá 2MB.\");\r\n        // Reset input file (Xóa file đã chọn)\r\n        event.target.value = '';\r\n        return;\r\n    }\r\n    // Nếu file hợp lệ, gửi file lên server\r\n    const formData = new FormData();\r\n    formData.append('ImageFile', file);\r\n    try {\r\n        const response = await api.postAPI('/Tour/UploadFile', formData); // Đường dẫn upload ảnh của quốc gia\r\n        if (response.data) {\r\n            Tour.value.image = response.data; // Lưu URL ảnh từ server\r\n            toast.success('Tải ảnh thành công!');\r\n            console.log(\"Ảnh đã được tải lên thành công:\", response.data);\r\n        }\r\n    } catch (error) {\r\n        toast.error(\"Tải ảnh thất bại vui lòng tải lại\")\r\n    }\r\n};\r\nconst isLocal = [\r\n    { id: 1, value: true },\r\n    { id: 2, value: false },\r\n];\r\nif (process.client) {\r\n    accountId.value = localStorage.getItem('userId');\r\n}\r\nconst fetchData = async () => {\r\n    try {\r\n        const resCountry = await api.get(`/Country`, null);\r\n        Country.value = resCountry.data.responseData;\r\n    } catch (error) {\r\n        console.error('Error fetching countries:', error);\r\n    }\r\n};\r\nonMounted(async () => {\r\n    await fetchData();\r\n})\r\nconst createTour = () => {\r\n    try{\r\n        const formData2 = new FormData();\r\n        formData2.append('nameTour', Tour.value.nameTour);\r\n        formData2.append('descripttion', Tour.value.descripttion);\r\n        formData2.append('seat', Tour.value.seat);\r\n        const cleanCost = parseFloat(Tour.value.cost.replace(/[\\D\\s\\._\\-]+/g, ''));\r\n        formData2.append('cost', isNaN(cleanCost) ? 0 : cleanCost);\r\n        const cleanCost1 = parseFloat(Tour.value.priceBuy.replace(/[\\D\\s\\._\\-]+/g, ''));\r\n        formData2.append('priceBuy',isNaN(cleanCost1) ? 0 : cleanCost1);\r\n        formData2.append('discount', Tour.value.discount);\r\n        formData2.append('islocal', Tour.value.isLocal);\r\n        formData2.append('dateEnd', Tour.value.dateEnd);\r\n        formData2.append('dateStart', Tour.value.dateStart);\r\n        formData2.append('plan', Tour.value.plan);\r\n        formData2.append('image', Tour.value.image);\r\n        formData2.append('serviceInclude', Tour.value.serviceInclude);\r\n        formData2.append('serviceNotInclude', Tour.value.serviceNotInclude);\r\n        formData2.append('countryId', Tour.value.countryId);\r\n        formData2.append('timeStart', Tour.value.timeStart);\r\n        formData2.append('timeEnd', Tour.value.timeEnd);\r\n        formData2.append('placeStart', Tour.value.placeStart);\r\n        formData2.append('placeEnd', Tour.value.placeEnd);\r\n        formData2.append('place', Tour.value.place);\r\n        formData2.append('meetingPoint', Tour.value.meetingPoint);\r\n        api.postAPI('/Tour/InsertTour', formData2)\r\n        emits('Tour-saved');\r\n        \r\n        toast.success('Thêm thành công!');\r\n        document.getElementById('closeModalButton').click();\r\n    }catch (error) {\r\n        console.error('Error creating Tour:', error);\r\n    }\r\n};\r\n\r\n// /** update Tour */\r\n// const updateTour =  () => {\r\n//     // Ensure cost is treated as a string\r\n//     const costStr = Tour.value.cost ? String(Tour.value.cost) : '';\r\n//     const cleanCost = parseFloat(costStr.replace(/[^0-9.-]+/g, ''));\r\n//     const data1 = {\r\n//         nameTour: Tour.value.nameTour || '',\r\n//         descripttion: Tour.value.descripttion || '',\r\n//         seat: Tour.value.seat || '',\r\n//         email: Tour.value.email || '',\r\n//         cost: isNaN(cleanCost) ? 0 : cleanCost,\r\n//         isLocal: JSON.parse(Tour.value.isLocal) || false,\r\n//         dateEnd: Tour.value.dateEnd || '',\r\n//         discount: Tour.value.discount || 0,\r\n//         dateStart: Tour.value.dateStart || '',\r\n//         plan: Tour.value.plan || '',\r\n//         image: Tour.value.image || '',\r\n//         serviceInclude: Tour.value.serviceInclude || '',\r\n//         serviceNotInclude: Tour.value.serviceNotInclude || '',\r\n//         countryId: Tour.value.countryId || '',\r\n//         timeEnd: Tour.value.timeEnd || '',\r\n//         timeStart: Tour.value.timeStart || '',\r\n//         placeEnd: Tour.value.placeEnd || '',\r\n//         placeStart: Tour.value.placeStart || '',\r\n//         place: Tour.value.place || '',\r\n//         meetingPoint: Tour.value.meetingPoint || '',\r\n//         appUserId: props.editTour.appUserId,\r\n//         id: props.editTour.id,\r\n//     };\r\n//     api.putAPI(`/Tour/${props.editTour.id}`, data1)\r\n//             .then((res) => {\r\n//                 emits('Tour-saved');\r\n//                 toast.success('Cập nhật thành công')\r\n//             })\r\n//             .catch((error) => {\r\n//                 console.error('Error updating Tour:', error);\r\n//             });\r\n//     };\r\nconst updateTour = () => {\r\n     const costStr = Tour.value.cost ? String(Tour.value.cost) : '';\r\n     const cleanCost = parseFloat(costStr.replace(/[^0-9.-]+/g, ''));\r\n     const costStr1 = Tour.value.cost ? String(Tour.value.priceBuy) : '';\r\n     const cleanCost1 = parseFloat(costStr1.replace(/[^0-9.-]+/g, ''));\r\n    const data = {\r\n        nameTour: Tour.value.nameTour || '', // Đảm bảo chuỗi không null\r\n        descripttion: Tour.value.descripttion || '',\r\n        seat: Number(Tour.value.seat) || 0, // Đảm bảo số nguyên\r\n        cost: isNaN(cleanCost) ? 0 : cleanCost,\r\n        priceBuy: isNaN(cleanCost1) ? 0 : cleanCost1,\r\n        // isLocal: !!Tour.value.isLocal, // Đảm bảo boolean\r\n        isLocal: JSON.parse(Tour.value.isLocal) || false,\r\n        dateEnd: Tour.value.dateEnd || null, // Hoặc định dạng chuẩn ISO nếu backend yêu cầu\r\n        discount: parseFloat(Tour.value.discount) || 0,\r\n        dateStart: Tour.value.dateStart || null,\r\n        plan: Tour.value.plan || '',\r\n        image: Tour.value.image || '',\r\n        serviceInclude: Tour.value.serviceInclude || '',\r\n        serviceNotInclude: Tour.value.serviceNotInclude || '',\r\n        countryId: Number(Tour.value.countryId) || null,\r\n        timeEnd: Tour.value.timeEnd || '',\r\n        timeStart: Tour.value.timeStart || '',\r\n        placeEnd: Tour.value.placeEnd || '',\r\n        placeStart: Tour.value.placeStart || '',\r\n        place: Tour.value.place || '',\r\n        meetingPoint: Tour.value.meetingPoint || '',\r\n        id: props.editTour.id || null,\r\n    };\r\n    \r\n    console.log(data);  // Debugging: Check if `id` is properly passed\r\n\r\n    api.putAPI(`/Tour/${props.editTour.id}`, data)\r\n        .then((res) => {\r\n            emits('Tour-saved');\r\n            console.log(res.data); // Kiểm tra dữ liệu trả về\r\n            toast.success('Cập nhật thành công');\r\n            document.getElementById('closeModalButton').click();\r\n        })\r\n        .catch((error) => {\r\n            console.error('Error updating Tour:', error);\r\n        });\r\n};\r\n\r\nconst errorMessage1 = ref({});\r\n\r\n\r\nconst validateTipTap = (content, fieldName) => {\r\n    const div = document.createElement('div');\r\n    div.innerHTML = content;\r\n    const text = div.textContent.trim();\r\n\r\n    if (!text) {\r\n        errorMessage1.value[fieldName] = 'Thông tin này không được để trống!';\r\n        return false;\r\n    }\r\n\r\n    // Xóa lỗi nếu nội dung hợp lệ\r\n    errorMessage1.value[fieldName] = '';\r\n    return true;\r\n};\r\nconst handleSubmit = () => {\r\n    const isServiceIncludeValid = validateTipTap(Tour.value.serviceInclude, 'serviceInclude');\r\n    const isServiceNotIncludeValid = validateTipTap(Tour.value.serviceNotInclude, 'serviceNotInclude');\r\n    const isPlanValid = validateTipTap(Tour.value.plan, 'plan');\r\n\r\n    if (isServiceIncludeValid && isServiceNotIncludeValid && isPlanValid) {\r\n        if (props.isEditMode) {\r\n            updateTour();\r\n        } else {\r\n            createTour();\r\n        }\r\n    }\r\n};\r\n\r\n// const handleSubmit = () => {\r\n//     const isValid = [\r\n//         validateTipTap(Tour.value.serviceInclude, 'Dịch vụ bao gồm'),\r\n//         validateTipTap(Tour.value.serviceNotInclude, 'Dịch vụ không bao gồm'),\r\n//         validateTipTap(Tour.value.plan, 'Lịch trình'),\r\n//     ].every(Boolean);\r\n\r\n//     if (!isValid) {\r\n//         toast.error('Vui lòng kiểm tra lại các trường bắt buộc.');\r\n//         return;\r\n//     }\r\n\r\n//     if (props.isEditMode) {\r\n//         updateTour();\r\n//     } else {\r\n//         createTour();\r\n//     }\r\n// };\r\n\r\n\r\n\r\n\r\n// const handleSubmit =  () => {\r\n//     if (props.isEditMode) {\r\n//          updateTour();\r\n//     } else {\r\n//          createTour();\r\n//     }\r\n// };\r\n\r\nwatch(\r\n    () => props.editTour,\r\n    (newVal) => {\r\n        if (newVal) {\r\n            Tour.value = { ...newVal };\r\n            Tour.value.dateStart = props.editTour.dateStart\r\n                ? props.editTour.dateStart.split('T')[0]\r\n                : '';\r\n            Tour.value.dateEnd = props.editTour.dateEnd\r\n                ? props.editTour.dateEnd.split('T')[0]\r\n                : '';\r\n        }\r\n    },\r\n    { immediate: true },\r\n);\r\n// Watch for changes in isLocal value to adjust CountryId\r\nwatch(() => Tour.value.isLocal, (newValue) => {\r\n    if (newValue) {\r\n        // Khi là tour nội địa, gán CountryId là Việt Nam (ID = 1)\r\n        const vietnam = Country.value.find(country => country.id === 1); // Tìm Việt Nam theo ID\r\n        if (vietnam) {\r\n            Tour.value.countryId = vietnam.id;\r\n        }\r\n    } else {\r\n        // Khi là tour ngoài nước, không cho phép chọn Việt Nam và gán countryId về null\r\n        //Tour.value.countryId = null;\r\n    }\r\n});\r\n// Lọc quốc gia dựa trên giá trị của isLocal\r\nconst filteredCountries = computed(() => {\r\n    if (Tour.value.isLocal) {\r\n        // Khi là tour nội địa, chỉ hiển thị Việt Nam (ID = 1)\r\n        return Country.value.filter(country => country.id === 1); // Lọc theo ID Việt Nam\r\n    } else {\r\n        // Khi không phải tour nội địa, hiển thị tất cả quốc gia ngoại trừ Việt Nam (ID = 1)\r\n        return Country.value.filter(country => country.id !== 1); // Lọc tất cả ngoại trừ Việt Nam\r\n    }\r\n});\r\nconst computedValue = computed({\r\n    get: () => {\r\n        var input = String(Tour.value.cost || '').replace(/[\\D\\s\\._\\-]+/g, '');\r\n        input = input ? parseFloat(input, 10) : 0;\r\n        return input.toLocaleString('en-US');\r\n    },\r\n    set: (newValue) => {\r\n        newValue = String(newValue).replace(/[^\\d.-]+/g, '');\r\n        newValue = newValue ? parseFloat(newValue, 10) : 0;\r\n        let isNumber = !isNaN(parseFloat(newValue)) && isFinite(newValue);\r\n\r\n        if (newValue == '') {\r\n            Tour.value.cost = '';\r\n        }\r\n\r\n        if (isNumber && parseFloat(newValue) > 0) {\r\n            Tour.value.cost = newValue.toLocaleString('en-US');\r\n        }\r\n    },\r\n});\r\nconst computedValue1 = computed({\r\n    get: () => {\r\n        var input = String(Tour.value.priceBuy || '').replace(/[\\D\\s\\._\\-]+/g, '');\r\n        input = input ? parseFloat(input, 10) : 0;\r\n        return input.toLocaleString('en-US');\r\n    },\r\n    set: (newValue) => {\r\n        newValue = String(newValue).replace(/[^\\d.-]+/g, '');\r\n        newValue = newValue ? parseFloat(newValue, 10) : 0;\r\n        let isNumber = !isNaN(parseFloat(newValue)) && isFinite(newValue);\r\n\r\n        if (newValue == '') {\r\n            Tour.value.priceBuy = '';\r\n        }\r\n\r\n        if (isNumber && parseFloat(newValue) > 0) {\r\n            Tour.value.priceBuy = newValue.toLocaleString('en-US');\r\n        }\r\n    },\r\n});\r\n\r\n\r\n</script>\r\n","<template>\r\n    <CVModal id_model=\"deleteTourModal\">\r\n        <template #icon>\r\n            <slot name=\"icon\"></slot>\r\n        </template>\r\n        <template #title>\r\n            <slot name=\"header\">Xóa Tour này</slot>\r\n        </template>\r\n        <template #body>\r\n            <p>Bạn có chắc chắn muốn xóa Tour này?</p>\r\n            <div class=\"modal-footer align-content-center justify-content-center\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\r\n                    Hủy bỏ\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteTour\">\r\n                    Xóa\r\n                </button>\r\n            </div>\r\n        </template>\r\n    </CVModal>\r\n</template>\r\n<script setup>\r\nimport Api from '~/service/Base/api.ts';\r\nimport { useToast } from 'vue-toast-notification';\r\nconst toast = useToast();\r\nconst props = defineProps({\r\n    TourId: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n});\r\n\r\nconst api = new Api();\r\nconst emits = defineEmits(['Tour-deleted', 'hide-modal']);\r\nconst deleteTour = () => {\r\n    const id = props.TourId;\r\n    api.deleteById('/Tour', id)\r\n        .then((res) => {\r\n            emits('Tour-deleted', id);\r\n            emits('hide-modal');\r\n            $('.btn-close').click();\r\n            toast.success('Xóa thành công')\r\n        })\r\n        .catch((error) => {\r\n            console.error('Lỗi khi xóa hTour:', error);\r\n        });\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","<template>\r\n    <div class=\"row\">\r\n        <div class=\"p-4\">\r\n            <div class=\"search\">\r\n                <h4 class=\"search-text h5\">Tour du lịch</h4>\r\n                <form\r\n                class=\"rounded-5 bg-light col-11 \"\r\n                name=\"search\"\r\n                @submit.prevent=\"submitSearch\"\r\n            >\r\n                <div class=\"border-bottom border-success pb-3 \">\r\n                    <div class=\"d-flex flex-row  mt-3 p-2\">\r\n                        <div class=\"col-2\">\r\n                            <button\r\n                            type=\"button\"\r\n                            :class=\"{\r\n                                'bg-infor btn-default rounded-2': isLocal === true,\r\n                                'form-control': true,\r\n                            }\"\r\n                            @click=\"isLocal = true\"\r\n                        >\r\n                            Du lịch trong nước\r\n                        </button>\r\n                        </div>\r\n                        <div class=\"col-2\">\r\n                            <button\r\n                            type=\"button\"\r\n                            :class=\"{\r\n                                'bg-infor btn-default rounded-2 ':\r\n                                    isLocal === false,\r\n                                'form-control ms-2': true,\r\n                            }\"\r\n                            @click=\"isLocal = false\"\r\n                        >\r\n                            Du lịch nước ngoài\r\n                        </button>\r\n\r\n                            </div>\r\n                        <div class=\"col-sm-6 ms-2\">\r\n                            <Field\r\n                                name=\"name\"\r\n                                v-model=\"nameTour\"\r\n                                type=\"text\"\r\n                                class=\"form-control ms-2  \"\r\n                                placeholder=\"Tên tour... \"\r\n                            />\r\n                        </div>\r\n                        <!-- <button\r\n                            type=\"button\"\r\n                            class=\"bg-infor btn-default rounded-2 form-control ms-3 \"\r\n                            style=\"padding: 0.25rem 0.5rem; font-size: 1rem; width: auto;\"\r\n                            @click=\"reloadTourList\"\r\n                        >\r\n                            <i class=\"fa-solid fa-arrows-rotate\"></i>\r\n                        </button> -->\r\n                    </div>\r\n                </div>\r\n                <div class=\"d-flex flex-row\">\r\n                    <div\r\n                        class=\"col-3 ms-3 my-4 rounded-3\"\r\n                        style=\"border: 1px solid #ccc;\"\r\n                    >\r\n                        <div class=\"ms-5\">Điểm đi</div>\r\n                        <div class=\"d-flex flex-row col-9\">\r\n                            <i class=\"fa-solid fa-location-dot col-3 ps-3 pt-2\"></i>\r\n                            <select v-model=\"placeStart\" class=\"col-6 form-select mb-2\">\r\n                                <option disabled value=\"Nơi khởi hành\">\r\n                                    <i class=\"fa-solid fa-location-dot\"></i> Nơi khởi hành\r\n                                </option>\r\n                                <option v-for=\"item in placeStartList\" :value=\"item\">\r\n                                    <i class=\"fa-solid fa-location-dot\"></i>\r\n                                    {{ item }}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\" my-auto\">\r\n                        <i\r\n                            class=\"fa-solid fa-arrow-right-arrow-left mx-3\"\r\n                            style=\"font-size: 1.5em\"\r\n                        ></i>\r\n                    </div>\r\n                    <div\r\n                        class=\"col-3 my-4 rounded-3\"\r\n                        style=\"border: 1px solid #ccc;\"\r\n                        v-if=\"isLocal\"\r\n                    >\r\n                        <div class=\"ms-5\">Điểm đến</div>\r\n                        <div class=\"d-flex flex-row col-9\">\r\n                            <i class=\"fa-solid fa-location-dot col-3 ps-3 mt-2\"></i>\r\n                            <select v-model=\"placeEnd\" class=\"col-6 form-select mb-2\">\r\n                                <option disabled value=\"Nơi kết thúc\">\r\n                                    Nơi kết thúc\r\n                                </option>\r\n                                <option v-for=\"item in placeEndList\" :value=\"item\">\r\n                                    {{ item }}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        class=\"col-3 my-4 rounded-3\"\r\n                        style=\"border: 1px solid #ccc;\"\r\n                        v-else\r\n                    >\r\n                        <div class=\"ms-5\">Điểm đến</div>\r\n                        <div class=\"d-flex flex-row col-9\">\r\n                            <i class=\"fa-solid fa-location-dot col-3 mt-2 ps-3\"></i>\r\n                            <select v-model=\"placeEnd\" class=\"col-6 form-select mb-2\">\r\n                                <option disabled value=\"Nơi kết thúc\">\r\n                                    Nơi kết thúc\r\n                                </option>\r\n                                <option v-for=\"item in filteredCountries\" :value=\"item.id\">\r\n                                    {{ item.countryName }}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        class=\"col-3 my-4 rounded-3 ms-3\"\r\n                        style=\"border: 1px solid #ccc;\"\r\n                    >\r\n                        <div class=\"ms-5\">Ngày đi</div>\r\n                        <div class=\"d-flex flex-row col-9\">\r\n                            <i class=\"fa-solid fa-calendar mt-2 ms-2\"></i>\r\n                            <input\r\n                                v-model=\"dateStart\"\r\n                                type=\"date\"\r\n                                class=\"col-6 form-control mb-2 ms-3\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-2 mt-2\">\r\n                        <button\r\n                        class=\" my-4 rounded-3 ms-3 bg-infor\"\r\n                        style=\"border: 1px solid #ccc;\"\r\n                        type=\"submit\"\r\n                    >\r\n                        <div class=\"d-flex flex-row s\">\r\n                            <i class=\"fa-solid fa-magnifying-glass mt-1  p-3\"></i>\r\n                            <div class=\"h6 mt-3\">Tìm kiếm</div>\r\n                        </div>\r\n                    </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            </div>\r\n            <div class=\"data\">\r\n                <div class=\"btn-handle d-flex justify-content-end mb-3\">\r\n                    \r\n                    <div class=\"handle-create\">\r\n                        <TheFormCreateUpdateTour\r\n                            :isEditMode=\"isEditMode\"\r\n                            :editTour=\"editTourData\"\r\n                            @Tour-saved=\"getTours\"\r\n                        />\r\n                        <a\r\n                            @click=\"onCreateMode\"\r\n                            href=\"#\"\r\n                            data-bs-toggle=\"modal\"\r\n                            data-bs-target=\"#create-update-Tour-modal\"\r\n                        >\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"20\"\r\n                                height=\"20\"\r\n                                viewBox=\"0 0 256 256\"\r\n                            >\r\n                                <path\r\n                                    fill=\"currentColor\"\r\n                                    d=\"M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16m-24 104h-48v48a8 8 0 0 1-16 0v-48H72a8 8 0 0 1 0-16h48V72a8 8 0 0 1 16 0v48h48a8 8 0 0 1 0 16\"\r\n                                />\r\n                            </svg>\r\n                        </a>\r\n                    </div>\r\n                    <!-- <div class=\"reload\">\r\n                        <a class=\"text-info\" href=\"#\" @click=\"getTours()\">\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"20\"\r\n                                height=\"20\"\r\n                                viewBox=\"0 0 512 512\"\r\n                            >\r\n                                <path\r\n                                    fill=\"currentColor\"\r\n                                    d=\"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208s208-93.31 208-208S370.69 48 256 48m120 190.77h-89l36.88-36.88l-5.6-6.51a87.38 87.38 0 1 0-62.94 148a87.55 87.55 0 0 0 82.42-58.25l5.37-15.13l30.17 10.67l-5.3 15.13a119.4 119.4 0 1 1-112.62-159.18a118.34 118.34 0 0 1 86.36 36.95l.56.62l4.31 5L376 149.81Z\"\r\n                                />\r\n                            </svg>\r\n                        </a>\r\n                    </div> -->\r\n                </div>\r\n                <table\r\n                    class=\"table text-center table-hover table-success table-striped-columns table-responsive table-bordered\"\r\n                >\r\n                    <thead class=\"table-primary table-active\">\r\n                        <tr>\r\n                            <th>No.</th>\r\n                            <th>Thông tin tour</th>\r\n                            <th>Thời gian</th>\r\n                            <!-- <th>Người tạo</th> -->\r\n                            <th>Tác vụ</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"(Tour, index) in Tours\" :key=\"index\">\r\n                            <td class=\"p-4 booking-id-col\">{{ ++index }}</td>\r\n                            <td class=\"p-4\">\r\n                                <span class=\"text-danger\">{{ Tour.nameTour }}</span>\r\n                                <br />\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-6\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            viewBox=\"0 0 576 512\"\r\n                                            width=\"15\"\r\n                                            height=\"15\"\r\n                                            class=\"me-1 mb-1\"\r\n                                            fill=\"green\"\r\n                                        >\r\n                                            <path\r\n                                                d=\"M64 64C28.7 64 0 92.7 0 128v64c0 8.8 7.4 15.7 15.7 18.6C34.5 217.1 48 235 48 256s-13.5 38.9-32.3 45.4C7.4 304.3 0 311.2 0 320v64c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V320c0-8.8-7.4-15.7-15.7-18.6C541.5 294.9 528 277 528 256s13.5-38.9 32.3-45.4c8.3-2.9 15.7-9.8 15.7-18.6V128c0-35.3-28.7-64-64-64H64zm64 112l0 160c0 8.8 7.2 16 16 16H432c8.8 0 16-7.2 16-16V176c0-8.8-7.2-16-16-16H144c-8.8 0-16 7.2-16 16zM96 160c0-17.7 14.3-32 32-32H448c17.7 0 32 14.3 32 32V352c0 17.7-14.3 32-32 32H128c-17.7 0-32-14.3-32-32V160z\"\r\n                                            />\r\n                                        </svg>\r\n\r\n                                        <span> {{ Tour.seat }}</span>\r\n                                        <br />\r\n                                        <i class=\"fa-solid fa-arrow-trend-down\"></i>\r\n\r\n                                        {{ Tour.discount || 0 }} %\r\n                                        <br />\r\n                                        \r\n                                        Giá mua:\r\n                                        <span>\r\n                                            {{ formatCurrency(Tour.priceBuy) }}\r\n                                        </span>\r\n                                        <br/>\r\n                                        Giá bán:\r\n                                        <span>{{\r\n                                           formatCurrency(Tour.priceSale)\r\n                                        }}</span>\r\n                                        <br/>\r\n                                        <span class=\"text-decoration-underline me-2\">\r\n                                            Số vé còn lại:\r\n                                        </span>\r\n                                        {{ Tour.slot }}\r\n                                    </div>\r\n                                    <div class=\"col-6\">\r\n                                        <i class=\"fa-solid fa-earth-africa me-1\"></i>\r\n                                        <span v-for=\"item in Country\">\r\n                                            <span\r\n                                                v-if=\"item.id == Tour.countryId\"\r\n                                                class=\"mt-2\"\r\n                                                >{{ item.countryName }}</span\r\n                                            >\r\n                                        </span>\r\n                                        <br />\r\n                                    </div>\r\n                                </div>\r\n                            </td>\r\n                            <td class=\"w-20 p-2\">\r\n                                {{ formatDate(Tour.dateStart) }}<br />\r\n                                {{ formatDate(Tour.dateEnd) }}\r\n                            </td>\r\n                            <!-- <td class=\"w-20\">\r\n                                <span v-for=\"item in User\">\r\n                                    <span v-if=\"item.id == Tour.appUserId\">\r\n                                        {{ item.fullName }}</span\r\n                                    ></span\r\n                                >\r\n                            </td> -->\r\n                            <td class=\"p-4\">\r\n                                <div\r\n                                    class=\"d-flex justify-content-center align-content-center align-items-center\"\r\n                                >\r\n                                    <NuxtLink\r\n                                        class=\"link link-primary text-decoration-none mx-1\"\r\n                                        data-bs-toggle=\"modal\"\r\n                                        data-bs-target=\"#create-update-Tour-modal\"\r\n                                        @click=\"TourEdit(Tour)\"\r\n                                        style=\"cursor: pointer\"\r\n                                    >\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"1.2em\"\r\n                                            height=\"1.2em\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                        >\r\n                                            <path\r\n                                                fill=\"currentColor\"\r\n                                                d=\"M5 18.08V19h.92l9.06-9.06l-.92-.92z\"\r\n                                                opacity=\"0.3\"\r\n                                            />\r\n                                            <path\r\n                                                fill=\"currentColor\"\r\n                                                d=\"M20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83l3.75 3.75zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM5.92 19H5v-.92l9.06-9.06l.92.92z\"\r\n                                            />\r\n                                        </svg>\r\n                                    </NuxtLink>\r\n                                    <NuxtLink\r\n                                        class=\"link link-danger text-decoration-none mx-1\"\r\n                                        style=\"cursor: pointer\"\r\n                                        @click=\"deleteTour(Tour.id)\"\r\n                                        data-bs-toggle=\"modal\"\r\n                                        data-bs-target=\"#deleteTourModal\"\r\n                                    >\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"1.2em\"\r\n                                            height=\"1.2em\"\r\n                                            viewBox=\"0 0 48 48\"\r\n                                        >\r\n                                            <path\r\n                                                fill=\"currentColor\"\r\n                                                d=\"M20 10.5v.5h8v-.5a4 4 0 0 0-8 0m-2.5.5v-.5a6.5 6.5 0 1 1 13 0v.5h11.25a1.25 1.25 0 1 1 0 2.5h-2.917l-2 23.856A7.25 7.25 0 0 1 29.608 44H18.392a7.25 7.25 0 0 1-7.224-6.644l-2-23.856H6.25a1.25 1.25 0 1 1 0-2.5zm4 9.25a1.25 1.25 0 1 0-2.5 0v14.5a1.25 1.25 0 1 0 2.5 0zM27.75 19c-.69 0-1.25.56-1.25 1.25v14.5a1.25 1.25 0 1 0 2.5 0v-14.5c0-.69-.56-1.25-1.25-1.25\"\r\n                                            />\r\n                                        </svg>\r\n                                    </NuxtLink>\r\n                                </div>\r\n                                <div class = \"d-flex flex-row mt-2 ps-5\">\r\n                                \r\n                               </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <DeleteTourModal\r\n                    :TourId=\"selectedTourId\"\r\n                    @Tour-deleted=\"getTours\"\r\n                    @hide-modal=\"getTours\"\r\n                />\r\n                <!-- <div class=\"d-flex justify-content-between\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <span class=\"me-5\">Tổng số: {{ totalCount }} Tour</span>\r\n                        <span>\r\n                            <Pagination\r\n                                :current-page=\"pageNumber\"\r\n                                :total-pages=\"totalPage\"\r\n                                :next-page=\"nextPage\"\r\n                                :previous-page=\"previousPage\"\r\n                                :set-page=\"setPage\"\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                    <div></div>\r\n                </div> -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref,onMounted } from 'vue';\r\nimport DeleteTourModal from '~/components/form/DeleteTourModal.vue';\r\nimport Api from '~/service/Base/api.ts';\r\nimport {formatCurrency,formatDate} from '~/assets/js/validate'\r\nconst api = new Api();\r\nconst Tours = ref([]);\r\nconst selectedTourId = ref(null);\r\nconst editTourData = ref({});\r\nconst isEditMode = ref(false);\r\nconst User = ref([]);\r\n// const pageNumber = ref(1);\r\n// const totalPage = ref(0);\r\n// const totalCount = ref(0);\r\n// const pageSize = ref(10);\r\nconst placeStart = ref('Nơi khởi hành');\r\nconst dateStart = ref('');\r\nconst placeEnd = ref('Nơi kết thúc');\r\nconst nameTour = ref('');\r\nconst placeStartList = ref([]);\r\nconst placeEndList = ref([]);\r\nconst Country = ref([]);\r\nconst isLocal = ref(true);\r\nconst isLocal2 = ref(true);\r\n/**\r\n * auth\r\n */\r\n definePageMeta({\r\n    middleware: ['auth','admin'],\r\n});\r\n\r\n/**\r\n * get all Tours\r\n */\r\n// const getTours = async () => {\r\n//     try {\r\n//         var response = await api.get(\r\n//             `/Tour/GetAllPagination?PageSize=${pageSize.value}&PageNumber=${pageNumber.value}`,\r\n//         );\r\n//         Tours.value = response.data.responseData.data;\r\n//         totalCount.value = response.data.responseData.pagination.totalCount;\r\n//         totalPage.value = response.data.responseData.pagination.totalPage;\r\n//     } catch (err) {\r\n//         console.log(err);\r\n//     }\r\n// };\r\nconst getTours = async () => {\r\n    try {\r\n        var response = await api.get(\r\n            `/Tour/GetAllTour`,null\r\n        );\r\n        Tours.value = response.data.responseData;\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\n/**\r\n * delete Tour\r\n * @param {*} id\r\n */\r\nconst deleteTour = async (id) => {\r\n    try {\r\n        selectedTourId.value = id;\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\nonMounted(async () => {\r\n    try {\r\n        // Gọi API để lấy danh sách tours\r\n        await getTours();\r\n        \r\n        // Lấy danh sách điểm khởi hành và điểm đến trong nước\r\n        Tours.value.forEach((tour) => {\r\n            if (!placeStartList.value.includes(tour.placeStart)) {\r\n                placeStartList.value.push(tour.placeStart);\r\n            }\r\n            if (!placeEndList.value.includes(tour.placeEnd) && tour.isLocal) {\r\n                placeEndList.value.push(tour.placeEnd);\r\n            }\r\n        });\r\n\r\n        // Gọi API để lấy danh sách các quốc gia\r\n        const getCountryResponse = await api.get(`/Country`);\r\n        Country.value = getCountryResponse.data.responseData;\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n});\r\nonMounted(async () => {\r\n    await getTours();\r\n    await fetchData();\r\n})\r\n/**\r\n * Search\r\n * @param {} date\r\n */\r\n\r\nconst submitSearch = async () => {\r\n    const queryParams = [];\r\n\r\n    if (placeStart.value && placeStart.value !== 'Nơi khởi hành') {\r\n        queryParams.push(`placeStart=${placeStart.value}`);\r\n    }\r\n\r\n    if (placeEnd.value && placeEnd.value !== 'Nơi kết thúc') {\r\n        if (isNaN(placeEnd.value)) {\r\n            // If placeEnd is not a number, treat it as a string\r\n            queryParams.push(`placeEnd=${placeEnd.value}`);\r\n        } else {\r\n            // If placeEnd is a number, treat it as CountryId\r\n            queryParams.push(`CountryId=${placeEnd.value}`);\r\n        }\r\n    }\r\n\r\n    if (dateStart.value) {\r\n        queryParams.push(`dateStart=${dateStart.value}`);\r\n    }\r\n    if (nameTour.value) {\r\n        queryParams.push(`name=${nameTour.value}`);\r\n    }\r\n\r\n    const queryString = queryParams.join('&');\r\n    if (!queryString) {\r\n        reloadTourList();\r\n    } else {\r\n        const res = await api.get(`/Tour/SearchTour?${queryString}`, null);\r\n        if (res.data.responseData && res.data.responseData.length > 0) {\r\n            Tours.value = res.data.responseData;\r\n        } else {\r\n            alert('Không có tour nào phù hợp với tìm kiếm của bạn!');\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * edit Tour\r\n * @param {*} Tour\r\n */\r\nconst TourEdit = async (Tour) => {\r\n    try {\r\n        editTourData.value = {\r\n            nameTour: Tour.nameTour,\r\n            descripttion: Tour.descripttion,\r\n            seat: Tour.seat,\r\n            cost: Tour.cost,\r\n            priceBuy: Tour.priceBuy,\r\n            discount: Tour.discount,\r\n            isLocal: Tour.isLocal,\r\n            dateEnd: Tour.dateEnd,\r\n            dateStart: Tour.dateStart,\r\n            timeEnd: Tour.timeEnd,\r\n            timeStart: Tour.timeStart,\r\n            placeStart: Tour.placeStart,\r\n            placeEnd: Tour.placeEnd,\r\n            place: Tour.place,\r\n            plan: Tour.plan,\r\n            isFinish: Tour.isFinish,\r\n            image: Tour.image,\r\n            numOfDay: Tour.numOfDay,\r\n            priceSale: Tour.priceSale,\r\n            serviceInclude: Tour.serviceInclude,\r\n            serviceNotInclude: Tour.serviceNotInclude,\r\n            countryId: Tour.countryId,\r\n            meetingPoint: Tour.meetingPoint,\r\n            id: Tour.id,\r\n        };\r\n        isEditMode.value = true;\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\nconst onCreateMode = async () => {\r\n    try {\r\n        isEditMode.value = false;\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\nconst fetchData = async () => {\r\n    const resCountry = await api.get(`/Country`, null);\r\n    Country.value = resCountry.data.responseData;\r\n};\r\n/**\r\n * call\r\n */\r\n\r\nconst reloadTourList = async () => {\r\n    const getTour = await api.get(`/Tour/GetAllTour`, null);\r\n    Tours.value = getTour.data.responseData;\r\n    placeStart.value = 'Nơi khởi hành';\r\n    placeEnd.value = 'Nơi kết thúc';\r\n    dateStart.value = '';\r\n    nameTour.value = '';\r\n};\r\n\r\n/**\r\n * Pagination\r\n */\r\n// const nextPage = () => {\r\n//     pageNumber.value++;\r\n//     getTours();\r\n// };\r\n// const previousPage = () => {\r\n//     pageNumber.value--;\r\n//     getTours();\r\n// };\r\n// const setPage = (number) => {\r\n//     pageNumber.value = number;\r\n//     getTours();\r\n// };\r\n// const filteredCountries = computed(() => {\r\n//     // Nếu tour là nước ngoài, loại bỏ Việt Nam khỏi danh sách\r\n//     if (!Tour.value.isLocal) {\r\n//         return Country.value.filter(country => country.id !== 1);\r\n//     }\r\n//     return Country.value;\r\n// });\r\n// Lọc quốc gia tùy thuộc vào loại tour\r\nconst filteredCountries = computed(() => {\r\n      if (!isLocal.value) {\r\n        // Nếu là tour nước ngoài, loại bỏ Việt Nam khỏi danh sách\r\n        return Country.value.filter(country => country.id !== 1);\r\n      }\r\n      return Country.value;\r\n    });\r\n\r\n</script>"],"names":[],"mappings":"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"}