{"version":3,"file":"_id_-BMHofiNT.js","sources":["../../../../pages/profile/[id].vue"],"sourcesContent":["<template>\r\n    <section class=\"card my-5\">\r\n        <article class=\"card-header\">\r\n            <h5>User Profile</h5>\r\n        </article>\r\n        <article class=\"card-body\">\r\n            <form @submit.prevent=\"updateProfile(accountId, account)\">\r\n                <div class=\"row mb-3 form-group required\">\r\n                    <label\r\n                        for=\"email\"\r\n                        class=\"col-sm-2 col-form-label control-label text-end\"\r\n                        >Email</label\r\n                    >\r\n                    <div class=\"col-sm-9\">\r\n                        <input\r\n                            type=\"email\"\r\n                            v-model=\"account.email\"\r\n                            class=\"form-control\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"row mb-3 form-group required\">\r\n                    <label\r\n                        for=\"fullName\"\r\n                        class=\"col-sm-2 col-form-label control-label text-end\"\r\n                    >\r\n                        Họ tên\r\n                    </label>\r\n                    <div class=\"col-sm-9\">\r\n                        <input\r\n                            type=\"text\"\r\n                            v-model=\"account.fullName\"\r\n                            class=\"form-control\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row mb-3 form-group required\">\r\n                    <label\r\n                        for=\"phone\"\r\n                        class=\"col-sm-2 col-form-label control-label text-end\"\r\n                        >Điện thoại</label\r\n                    >\r\n                    <div class=\"col-sm-9\">\r\n                        <input type=\"text\" v-model=\"account.phone\" class=\"form-control\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"row mb-3 form-group\">\r\n                    <label\r\n                        for=\"authority\"\r\n                        class=\"col-sm-2 col-form-label control-label text-end\"\r\n                        >Quyền</label\r\n                    >\r\n                    <div class=\"col-sm-9\">\r\n                        <select\r\n                            class=\"form-select\"\r\n                            v-model=\"account.roleId\"\r\n                            disabled\r\n                            aria-label=\"Default select example\"\r\n                        >\r\n                            <option v-for=\"role in roles\" :value=\"role.id\">\r\n                                {{ role.roleName }}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class=\"align-items-center justify-content-center text-center mt-5\">\r\n                    <button type=\"submit\" class=\"btn btn-primary mx-2\">\r\n                        <i class=\"fa-solid fa-floppy-disk me-1\"></i>\r\n                        Cập nhật\r\n                    </button>\r\n                    <NuxtLink\r\n                        class=\"text-decoration-none\"\r\n                        data-bs-toggle=\"modal\"\r\n                        data-bs-target=\"#changePasswordModal\"\r\n                    >\r\n                        <button type=\"button\" class=\"btn btn-outline-primary me-2\">\r\n                            <i class=\"fa-solid fa-retweet\"></i>\r\n                            Đổi mật khẩu\r\n                        </button>\r\n                    </NuxtLink>\r\n                    <NuxtLink to=\"/booking\" class=\"text-decoration-none\">\r\n                        <button type=\"button\" class=\"btn btn-outline-secondary me-2\">\r\n                            <i class=\"fa-solid fa-left-long mx-1\"></i>\r\n                            Quay lại\r\n                        </button>\r\n                    </NuxtLink>\r\n                </div>\r\n            </form>\r\n        </article>\r\n        <ChangePasswordModal :accountId=\"accountId\" />\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport Api from '~/service/Base/api.ts';\r\nimport { useToast } from 'vue-toast-notification';\r\nconst toast = useToast();\r\nconst api = new Api();\r\ndefinePageMeta({\r\n    middleware: ['auth', 'admin'],\r\n});\r\n\r\nexport default {\r\n    name: '[id]',\r\n    data() {\r\n        return {\r\n            accountId: '',\r\n            roles: [],\r\n            account: {\r\n                id: '',\r\n                email: '',\r\n                password: '',\r\n                fullName: '',\r\n                phone: '',\r\n                roleId: 2,\r\n            },\r\n        };\r\n    },\r\n    mounted() {\r\n        this.accountId = this.$route.params.id;\r\n        this.getAccount(this.accountId);\r\n        this.getRoles();\r\n    },\r\n    methods: {\r\n        getAccount(id) {\r\n            api.get(`/Account/findbyid/${id}`, null).then((res) => {\r\n                this.account = { ...res.data.responseData };\r\n            });\r\n        },\r\n        updateProfile(id, account) {\r\n            api.putAPI(`/Account/${id}`, account)\r\n                .then((response) => {\r\n                if(response.status === 200){\r\n                    toast.success('Cập nhật thành công')\r\n                    this.getAccount(id);\r\n                }\r\n                    \r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        getRoles() {\r\n            api.get(`/Role`, null)\r\n                .then((res) => {\r\n                    this.roles = res.data.responseData;\r\n                })\r\n                .catch((err) => console.log(err));\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderAttr","_ssrRenderList","_ssrInterpolate","_ssrRenderComponent","_withCtx","_push","_parent","_createVNode","_createTextVNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA,MAAM,QAAQ,SAAQ;AACtB,MAAM,MAAM,IAAI;AAKhB,MAAK,YAAU;AAAA,EACX,MAAM;AAAA,EACN,OAAO;AACH,WAAO;AAAA,MACH,WAAW;AAAA,MACX,OAAO,CAAE;AAAA,MACT,SAAS;AAAA,QACL,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,UAAU;AAAA,QACV,UAAU;AAAA,QACV,OAAO;AAAA,QACP,QAAQ;AAAA,MACX;AAAA;EAER;AAAA,EACD,UAAU;AACN,SAAK,YAAY,KAAK,OAAO,OAAO;AACpC,SAAK,WAAW,KAAK,SAAS;AAC9B,SAAK,SAAQ;AAAA,EAChB;AAAA,EACD,SAAS;AAAA,IACL,WAAW,IAAI;AACX,UAAI,IAAI,qBAAqB,EAAE,IAAI,IAAI,EAAE,KAAK,CAAC,QAAQ;AACnD,aAAK,UAAU,EAAE,GAAG,IAAI,KAAK;MACjC,CAAC;AAAA,IACJ;AAAA,IACD,cAAc,IAAI,SAAS;AACvB,UAAI,OAAO,YAAY,EAAE,IAAI,OAAO,EAC/B,KAAK,CAAC,aAAa;AACpB,YAAG,SAAS,WAAW,KAAI;AACvB,gBAAM,QAAQ,qBAAqB;AACnC,eAAK,WAAW,EAAE;AAAA,QACtB;AAAA,OAEC,EACA,MAAM,CAAC,QAAQ;AACZ,gBAAQ,IAAI,GAAG;AAAA,MACnB,CAAC;AAAA,IACR;AAAA,IACD,WAAW;AACP,UAAI,IAAI,SAAS,IAAI,EAChB,KAAK,CAAC,QAAQ;AACX,aAAK,QAAQ,IAAI,KAAK;AAAA,OACzB,EACA,MAAM,CAAC,QAAQ,QAAQ,IAAI,GAAG,CAAC;AAAA,IACvC;AAAA,EACJ;AACL;;;;AAzJA,QAAA,WAAAA,eAAAC,WACa,EAAA,OAAM,YADnB,GAAA,MAAA,CAAA,4QAAAC,cAAA,SAgBqC,MAAO,QAAC,KAAK,8NAhBlDA,cAAA,SAiCqC,MAAO,QAAC,QAAQ,oNAjCrDA,cAAA,SA6CoD,MAAO,QAAC,KAAK;AA7CjEC,gBA8DmD,MAAA,OA9DnD,CA8D2C,SAAI;AA9D/C,UAAA,UAAAD,cA8D2D,SAAO,KAAK,EAAE,KA9DzEE,eA+DmC,KAAK,QAAQ;;AA/DhD,QAAA,yNAAA;AAAA,QAAAC,mBAAA,qBAAA;AAAA,IA0EwB,OAAM;AAAA,IACN,kBAAe;AAAA,IACf,kBAAe;AAAA;IA5EvC,SAAAC,QAyEoB,CASW,GAAAC,QAAAC,UAAA,aAAA;AAlF/B,UAAAD,QAAA;AAAA,QAAAA,OAAA,6DAAA,0CAAA;;;UA8EwBE,YAGS,UAAA;AAAA,YAHD,MAAK;AAAA,YAAS,OAAM;AAAA;YACxBA,YAAmC,KAAA,EAAhC,OAAM,sBAAqB,CAAA;AAAA,YA/E1DC,gBA+E+D,gBAEvC;AAAA;;;;IAjFxB,GAAA;AAAA;AAAA,QAAAL,mBAAA,qBAAA;AAAA,IAmF8B,IAAG;AAAA,IAAW,OAAM;AAAA;IAnFlD,SAAAC,QAmFoB,CAKW,GAAAC,QAAAC,UAAA,aAAA;AAxF/B,UAAAD,QAAA;AAAA,QAAAA,OAAA,+DAAA,iDAAA;;;UAoFwBE,YAGS,UAAA;AAAA,YAHD,MAAK;AAAA,YAAS,OAAM;AAAA;YACxBA,YAA0C,KAAA,EAAvC,OAAM,6BAA4B,CAAA;AAAA,YArFjEC,gBAqFsE,YAE9C;AAAA;;;;IAvFxB,GAAA;AAAA;AAAA,QAAA,yBAAA;AAAA,QAAAL,mBAAA,gCAAA,EA4F8B,WAAW,MAAS,UAAA,GAAA,MAAA,OAAA,CAAA;AA5FlD,QAAA,YAAA;;;;;;;;;"}