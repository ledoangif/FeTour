import{_ as I,n as y,r as i,o as c,c as d,a as s,G as b,z as _,A as f,t as p,v as m,a0 as S,p as D,e as N}from"./-qx6OsVB.js";import{A as E}from"./Q_m3z1ei.js";const M=""+new URL("logo4.B5lkzTZQ.png",import.meta.url).href,v=n=>(D("data-v-fde57966"),n=n(),N(),n),T={class:"login min-vh-100 min-vw-100"},A={class:"main pt-5"},B=v(()=>s("div",{class:"text-center p-5"},[s("img",{src:M,style:{width:"15%","border-radius":"5%"},alt:"logo"})],-1)),V={class:"bg-light p-4 rounded shadow mx-auto",style:{width:"25%"}},P=v(()=>s("div",{class:"fs-3 text-center mb-4 text-dark"},"ĐĂNG NHẬP TÀI KHOẢN",-1)),U={class:"mt-10"},z={class:"col-lg-12 mx-auto"},L={class:"mb-4"},F={key:0,class:"text-danger"},G={class:"mb-4"},H={key:0,class:"text-danger"},Z=v(()=>s("div",{class:"text-center m-4"},[s("button",{type:"submit",class:"btn btn-primary"},"Đăng Nhập")],-1)),C={key:0,class:"text-danger text-center"},K={__name:"Login",setup(n){const w=y.useToast(),t=i({email:"",password:""}),r=i(""),l=i(null),o=i(null),k=new E,h=()=>{const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;t.value.email?a.test(t.value.email)?l.value=null:l.value="Vui lòng nhập email hợp lệ":l.value="Email không được để trống"},g=()=>{t.value.password?t.value.password.length<5?o.value="Mật khẩu phải có ít nhất 5 ký tự!":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t.value.password)?o.value=null:o.value="Mật khẩu phải có ít nhất 5 ký tự gồm chữ hoa, chữ thường và số.":o.value="Mật khẩu không được để trống"},x=async()=>{if(h(),g(),!(l.value||o.value))try{const a={email:t.value.email,password:t.value.password},e=await k.postAPI("/Account/login",a);e.status===200&&e.data&&e.data.message&&w.success(e.data.message),localStorage.setItem("token",e.data.responseData.accessToken),localStorage.setItem("userId",e.data.responseData.userId),localStorage.setItem("userFullName",e.data.responseData.userFullName),localStorage.setItem("email",e.data.responseData.email),localStorage.setItem("role",e.data.responseData.role),S("/booking")}catch(a){console.log(a),a.response&&a.response.data&&a.response.data.message?r.value=a.response.data.message:r.value="Tên đăng nhập hoặc mật khẩu không đúng"}};return(a,e)=>(c(),d("div",T,[s("div",A,[B,s("div",V,[P,s("form",{onSubmit:b(x,["prevent"])},[s("div",U,[s("div",z,[s("div",L,[_(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=u=>t.value.email=u),name:"email",placeholder:"Email",onBlur:h},null,544),[[f,t.value.email]]),l.value?(c(),d("div",F,p(l.value),1)):m("",!0)]),s("div",G,[_(s("input",{type:"password",class:"form-control",placeholder:"Mật khẩu","onUpdate:modelValue":e[1]||(e[1]=u=>t.value.password=u),onBlur:g},null,544),[[f,t.value.password]]),o.value?(c(),d("div",H,p(o.value),1)):m("",!0)])])]),Z],32),r.value?(c(),d("div",C,p(r.value),1)):m("",!0)])])]))}},R=I(K,[["__scopeId","data-v-fde57966"]]);export{R as default};
