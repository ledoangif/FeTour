import{_ as E}from"./bDhVN2i7.js";import{n as T,r as u,h as H,o as h,s as U,w as v,u as B,c as f,d as g,v as S,b as a,B as r,F as I,a as e,q as y,E as x,z as D,x as z,y as A,t as p,H as L,I as j,G,A as X}from"./-qx6OsVB.js";import{A as q}from"./Q_m3z1ei.js";import{_ as O}from"./DRJbnSa7.js";const P={key:0},J={class:"row"},K={class:"row col-lg-6 mb-3 form-group required"},Q={class:"row mb-3 form-group required"},R=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," Tên khách hàng ",-1),W={class:"col-sm-8"},Y={class:"row mb-3 form-group required"},Z=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," Số điện thoại ",-1),ee={class:"col-sm-8"},te={class:"row mb-3 form-group required"},oe=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," Địa chỉ ",-1),se={class:"col-sm-8"},le={class:"row mb-3 form-group required"},ae=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," Giới tính ",-1),ne={class:"col-sm-8"},re=["value"],ce={class:"row col-lg-6 mb-3 form-group required"},de={class:"row mb-3 form-group required"},ie=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," CCCD ",-1),ue={class:"col-sm-8"},me={class:"row mb-3 form-group required"},he=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," Email ",-1),_e={class:"col-sm-8"},pe={class:"row mb-3 form-group required"},ve=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," Số tài khoản ",-1),be={class:"col-sm-8"},fe={class:"row mb-3 form-group required"},ge=e("label",{for:"source-name",class:"col-sm-4 col-form-label control-label text-end"}," Ngân hàng ",-1),Ce={class:"col-sm-8"},ye={class:"modal-footer align-content-center justify-content-center"},xe={key:0,type:"submit",class:"btn btn-sm btn-primary d-flex align-items-center"},ke=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"0.88em",height:"1em",viewBox:"0 -70 700 700"},[e("path",{fill:"#f7f7f7",d:"m433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941M224 416c-35.346 0-64-28.654-64-64c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64m96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48"})],-1),we=e("button",{id:"closeModalButton",type:"button",class:"btn-close","data-bs-dismiss":"modal",hidden:""},null,-1),$e={__name:"TheFormCreateUpdateCustomer",props:{editCustomer:{type:Object,default:null,required:!1},isEditMode:{type:Boolean,default:!1,required:!0}},emits:["Customer-saved"],setup(k,{emit:w}){const C=T.useToast(),N=new q,V=w,d=u(null),i=k,c=[!0,!1],b=()=>{t.value={...M},d.value&&d.value.resetForm({values:{...t.value},errors:{}})},M={nameCustomer:"",phoneNumber:"",identityCard:"",address:"",email:"",accountBank:"",gender:!0,bankName:""},t=u({...M}),l=()=>{const _={nameCustomer:t.value.nameCustomer,phoneNumber:t.value.phoneNumber,address:t.value.address,email:t.value.email,identityCard:t.value.identityCard,accountBank:t.value.accountBank,gender:JSON.parse(t.value.gender),bankName:t.value.bankName,id:i.editCustomer.id};N.putAPI(`/Customer/${i.editCustomer.id}`,_).then(o=>{V("Customer-saved"),C.success("Cập nhật thành công"),document.getElementById("closeModalButton").click()}).catch(o=>{console.error("Error updating Customer:",o)}),b()},m=()=>{i.isEditMode?l():createCustomer()};return H(()=>i.editCustomer,_=>{_&&(t.value={..._},d.value&&d.value.resetForm({values:{...t.value},errors:{}}))},{immediate:!0}),(_,o)=>{const n=E;return h(),U(n,{id_model:"create-update-Customer-modal",onCloseModal:b},{icon:v(()=>[B(_.$slots,"icon")]),title:v(()=>[k.isEditMode?(h(),f("span",P,[B(_.$slots,"header",{},()=>[g("Cập nhật khách hàng")])])):S("",!0)]),body:v(()=>[a(r(I),{ref_key:"formcus",ref:d,onSubmit:m},{default:v(()=>[e("div",J,[e("div",K,[e("div",Q,[R,e("div",W,[a(r(y),{name:"nameCustomer",modelValue:t.value.nameCustomer,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value.nameCustomer=s),type:"text",class:"form-control",rules:{required:!0,onlyCharacters:!0}},null,8,["modelValue"]),a(r(x),{name:"nameCustomer",class:"text-danger"})])]),e("div",Y,[Z,e("div",ee,[a(r(y),{name:"phoneNumber",modelValue:t.value.phoneNumber,"onUpdate:modelValue":o[1]||(o[1]=s=>t.value.phoneNumber=s),type:"text",class:"form-control",rules:{required:!0,phone:!0}},null,8,["modelValue"]),a(r(x),{name:"phoneNumber",class:"text-danger"})])]),e("div",te,[oe,e("div",se,[a(r(y),{name:"address",modelValue:t.value.address,"onUpdate:modelValue":o[2]||(o[2]=s=>t.value.address=s),type:"text",class:"form-control",rules:{required:!0}},null,8,["modelValue"]),a(r(x),{name:"address",class:"text-danger"})])]),e("div",le,[ae,e("div",ne,[D(e("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>t.value.gender=s),class:"form-control"},[(h(),f(z,null,A(c,s=>e("option",{key:s,value:s},p(s?"Nam":"Nữ"),9,re)),64))],512),[[L,t.value.gender]])])])]),e("div",ce,[e("div",de,[ie,e("div",ue,[a(r(y),{name:"identityCard",modelValue:t.value.identityCard,"onUpdate:modelValue":o[4]||(o[4]=s=>t.value.identityCard=s),type:"text",class:"form-control",rules:{required:!0}},null,8,["modelValue"]),a(r(x),{name:"identityCard",class:"text-danger"})])]),e("div",me,[he,e("div",_e,[a(r(y),{name:"email",modelValue:t.value.email,"onUpdate:modelValue":o[5]||(o[5]=s=>t.value.email=s),type:"text",class:"form-control",rules:{required:!0,email:!0}},null,8,["modelValue"]),a(r(x),{name:"email",class:"text-danger"})])]),e("div",pe,[ve,e("div",be,[a(r(y),{name:"accountBank",modelValue:t.value.accountBank,"onUpdate:modelValue":o[6]||(o[6]=s=>t.value.accountBank=s),type:"text",class:"form-control",rules:{required:!0}},null,8,["modelValue"]),a(r(x),{name:"accountBank",class:"text-danger"})])]),e("div",fe,[ge,e("div",Ce,[a(r(y),{name:"bankName",modelValue:t.value.bankName,"onUpdate:modelValue":o[7]||(o[7]=s=>t.value.bankName=s),type:"text",class:"form-control",rules:{required:!0}},null,8,["modelValue"]),a(r(x),{name:"bankName",class:"text-danger"})])])])]),e("div",ye,[k.isEditMode?(h(),f("button",xe,[ke,g(" Lưu ")])):S("",!0),we])]),_:1},512)]),_:3})}}},Ne=$e,Ve=e("p",null,"Bạn có chắc chắn muốn xóa khách hàng này?",-1),Me=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Hủy bỏ ",-1),Be={__name:"DeleteCustomerModal",props:{CustomerId:{type:String,required:!0}},emits:["Customer-deleted","hide-modal"],setup(k,{emit:w}){const C=T.useToast(),N=k,V=new q,d=w,i=()=>{const c=N.CustomerId;V.deleteById("/Customer",c).then(b=>{d("Customer-deleted",c),d("hide-modal"),$(".btn-close").click(),C.success("Xóa thành công")}).catch(b=>{console.error("Lỗi khi xóa khách hàng:",b)})};return(c,b)=>{const M=E;return h(),U(M,{id_model:"deleteCustomerModal"},{icon:v(()=>[B(c.$slots,"icon")]),title:v(()=>[B(c.$slots,"header",{},()=>[g("Xóa khách hàng này")])]),body:v(()=>[Ve,e("div",{class:"modal-footer align-content-center justify-content-center"},[Me,e("button",{type:"button",class:"btn btn-danger",onClick:i}," Xóa ")])]),_:3})}}},qe=Be,Se={class:"row"},Ee={class:"p-4"},Te={class:"search"},Ue=e("h4",{class:"search-text h5"},"Khách hàng",-1),De=e("div",{class:"mt-3"},"Tìm kiếm:",-1),ze={class:"search-text d-flex align-content-center"},Ae={class:"col-md-3"},Fe=e("span",{class:"button d-flex"},[e("button",{class:"ms-2 btn-sm me-1 btn btn-primary",type:"submit"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"})]),g(" Tìm kiếm ")])],-1),He={class:"data"},Ie={class:"btn-handle d-flex justify-content-end mb-3"},Le={class:"table text-center table-hover table-success table-striped-columns"},je=e("thead",{class:"table-primary table-active"},[e("tr",null,[e("th",{scope:"col"},"No."),e("th",{colspan:"2"},"Thông tin khách hàng"),e("th",{colspan:"2"},"Thông tin liên lạc"),e("th",{scope:"col"},"Địa chỉ"),e("th",{colspan:"2"},"Thông tin thanh toán"),e("th",{scope:"col"},"Tác vụ")])],-1),Ge={class:"p-4 booking-id-col"},Xe={colspan:"2",class:"p-4"},Oe={key:0},Pe={key:1},Je=e("br",null,null,-1),Ke={colspan:"2",class:"p-4"},Qe=["href"],Re=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-telephone-forward-fill ms-2",viewBox:"0 0 16 16"},[e("path",{"fill-rule":"evenodd",d:"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877zm10.761.135a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708L14.293 4H9.5a.5.5 0 0 1 0-1h4.793l-1.647-1.646a.5.5 0 0 1 0-.708"})],-1),We=e("br",null,null,-1),Ye={class:"p-4"},Ze={colspan:"2",class:"p-4"},et=e("br",null,null,-1),tt={class:"p-4"},ot={class:"d-flex justify-content-center align-content-center align-items-center"},st=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M5 18.08V19h.92l9.06-9.06l-.92-.92z",opacity:"0.3"}),e("path",{fill:"currentColor",d:"M20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83l3.75 3.75zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM5.92 19H5v-.92l9.06-9.06l.92.92z"})],-1),lt=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"},[e("path",{fill:"currentColor",d:"M20 10.5v.5h8v-.5a4 4 0 0 0-8 0m-2.5.5v-.5a6.5 6.5 0 1 1 13 0v.5h11.25a1.25 1.25 0 1 1 0 2.5h-2.917l-2 23.856A7.25 7.25 0 0 1 29.608 44H18.392a7.25 7.25 0 0 1-7.224-6.644l-2-23.856H6.25a1.25 1.25 0 1 1 0-2.5zm4 9.25a1.25 1.25 0 1 0-2.5 0v14.5a1.25 1.25 0 1 0 2.5 0zM27.75 19c-.69 0-1.25.56-1.25 1.25v14.5a1.25 1.25 0 1 0 2.5 0v-14.5c0-.69-.56-1.25-1.25-1.25"})],-1),dt={__name:"index",setup(k){const w=new q,C=u([]),N=u(null),V=u({}),d=u(!1),i=u("");u(1),u(0),u(0),u(10);const c=async()=>{try{var l=await w.get("/Customer",null);C.value=l.data.responseData}catch(m){console.log(m)}},b=async l=>{try{N.value=l}catch(m){console.log(m)}},M=async l=>{try{V.value={nameCustomer:l.nameCustomer,phoneNumber:l.phoneNumber,identityCard:l.identityCard,address:l.address,email:l.email,accountBank:l.accountBank,gender:l.gender,bankName:l.bankName,id:l.id},d.value=!0}catch(m){console.log(m)}},t=async()=>{try{if(i.value){const l=await w.get(`/Customer/searchByPhone?phone=${i.value}`,null);C.value=l.data.responseData}else{await c();return}}catch(l){console.log(l)}};return j(async()=>{await c()}),(l,m)=>{const _=Ne,o=O;return h(),f("div",Se,[e("div",Ee,[e("div",Te,[Ue,e("form",{name:"search",onSubmit:G(t,["prevent"])},[De,e("div",ze,[e("div",Ae,[D(e("input",{class:"form-control col-md-2","onUpdate:modelValue":m[0]||(m[0]=n=>i.value=n),type:"text",placeholder:" Số điện thoại... "},null,512),[[X,i.value]])]),Fe])],32)]),e("div",He,[e("div",Ie,[a(_,{isEditMode:d.value,editCustomer:V.value,onCustomerSaved:c},null,8,["isEditMode","editCustomer"])]),e("table",Le,[je,e("tbody",null,[(h(!0),f(z,null,A(C.value,(n,s)=>(h(),f("tr",{key:s},[e("td",Ge,p(++s),1),e("td",Xe,[g(p(n.nameCustomer)+" - ",1),n.gender==!0?(h(),f("span",Oe,"Nam")):(h(),f("span",Pe,"Nữ")),Je,e("span",null,"CCCD : "+p(n.identityCard),1)]),e("td",Ke,[e("a",{class:"phone-link",href:`tel://${n.phoneNumber}`},[g(p(n.phoneNumber)+" ",1),Re],8,Qe),We,e("span",null,p(n.email),1)]),e("td",Ye,p(n.address),1),e("td",Ze,[g(p(n.accountBank)+" ",1),et,g(" "+p(n.bankName),1)]),e("td",tt,[e("div",ot,[a(o,{class:"link link-primary text-decoration-none mx-1","data-bs-toggle":"modal","data-bs-target":"#create-update-Customer-modal",onClick:F=>M(n),style:{cursor:"pointer"}},{default:v(()=>[st]),_:2},1032,["onClick"]),a(o,{class:"link link-danger text-decoration-none mx-1",style:{cursor:"pointer"},onClick:F=>b(n.id),"data-bs-toggle":"modal","data-bs-target":"#deleteCustomerModal"},{default:v(()=>[lt]),_:2},1032,["onClick"])])])]))),128))])]),a(qe,{CustomerId:N.value,onCustomerDeleted:c,onHideModal:c},null,8,["CustomerId"])])])])}}};export{dt as default};
